<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><title>Sample</title><style>*{margin:0;padding:0}body{overflow:hidden;user-select:none;background-color:#272d37;width:100%;height:100%}canvas{image-rendering:auto;image-rendering:crisp-edges;image-rendering:pixelated;pointer-events:auto;display:block;outline:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#bg{background-color:#1a1c2c}</style></head><body><script>(()=>{var e=Math.pow;function t(e){return e+"px"}var $={};function i(e){if(!$[e]){const t=document.createElement("canvas"),i=t.getContext("2d");$[e]={canvas:t,ctx:i}}return $[e]}function n(e){$[e]&&delete $[e]}var a=0;function r(){return a+=1}function o(e,t){const $=e.x+e.width/2-(t.x+t.width/2),i=e.y+e.height/2-(t.y+t.height/2),n=(e.width+t.width)/2,a=(e.height+t.height)/2,r={side:"",overlap:null};return Math.abs($)<n&&Math.abs(i)<a&&(r.overlap={x:n-Math.abs($),y:a-Math.abs(i)},r.overlap.x>=r.overlap.y?r.side=i>0?"top":"bottom":r.side=$>0?"left":"right"),r.hit=Boolean(r.side),r}function A(e,t){var $=e.x<t.x+t.width&&e.x+e.width>t.x,i=e.y<t.y+t.height&&e.y+e.height>t.y;return $&&i}function d(e,t){return e.findIndex((e=>e.uid===t.uid))}function s(e,t){const $=e.x+e.width*e.pivotX,i=e.y+e.height*e.pivotY;t.setTransform(e.scaleX,0,0,e.scaleY,$,i)}function l(){let e=1,t={x:0,y:0,alpha:1,width:0,height:0,scaleX:1,scaleY:1,pivotX:0,pivotY:0,rotation:0,visible:!0,uid:r(),gx:0,gy:0,detach:()=>{t.parent&&t.parent.remove(t)},render:()=>{},update:()=>{}};return Object.defineProperties(t,{alpha:{get:()=>t.parent?t.parent.alpha*e:e,set:t=>{e=t}},gx:{get:()=>t.parent?t.x+t.parent.gx:t.x},gy:{get:()=>t.parent?t.y+t.parent.gy:t.y}}),t}function h(e,t,$,i=0,n=0){const a=t.frames,r=t.w,o=t.palette;let A=a.split("|")[$];A=A.replace(/(\D)(\d+)/g,((e,t,$)=>t.repeat($))),[...A].forEach(((t,$)=>{const a=o[t];if(void 0===a)return;const A=$%r,d=Math.floor($/r);e.fillStyle=a,e.fillRect(A+i,d+n,1,1)}))}function c(e,t=!0,$=!0){const n=e.frames,a=e.fps,r=n.split("|").length,o=l(),A=o.detach;let d=0,c=0,f=t;const u=Array.from({length:r},((e,t)=>i(o.uid+"_"+t))),p=Object.assign(o,{texture:e,loop:$,render:e=>{if(!p.visible||!p.texture)return;const t=u[d],$=t.canvas,i=t.ctx;if(t.cached)return s(p,e),void e.drawImage($,0,0);t.cached=!0,$.width=e.canvas.width,$.height=e.canvas.height,h(i,p.texture,d),s(p,i)},update:()=>{if(f){if(!p.loop&&d==r-1)return p.stop(),void(p.onComplete&&p.onComplete(p.name));for(c+=At.timer.fdt;c*a>=1;)d=++d%r,c-=1/a}},start:(e=0)=>{p.playing||(y(),m(e),f=!0)},stop:e=>{m(e),f=!1},destroy:()=>{y()},detach:()=>{A(),y()}});function y(){p.stop(),f=!1,d=0,c=0}function m(e){d=void 0!==e?e:d}return Object.defineProperties(p,{playing:{get:()=>f},currentFrame:{get:()=>d},totalFrames:{get:()=>r}}),e&&(p.width=e.w,p.height=e.h),p}function f(e){var t;let $,i={};for(let n in e){const a=e[n],r=c(a.texture,!1);r.loop=null!=(t=a.loop)?t:r.loop,r.name=n,i[n]=r,$=r}const n=l(),a=Object.assign(n,{render:e=>{a.visible&&$&&$.render(e)},update:()=>{$.update(),function(){for(let e in i){const t=i[e];r(a,t)}}()},play:(e,t)=>{var n;(n=e,$&&$.playing&&n===$.name)||($&&($.stop(),$.onComplete=null),$=i[e],$.onComplete=e=>{a.onComplete&&a.onComplete(e)},$.start(t))},stop:e=>{$&&$.stop(e)}});function r(e,t){["x","y","alpha","width","height","scaleX","scaleY","pivotX","pivotY","rotation","visible"].forEach(($=>{t[$]=e[$]}))}return a}function u(e,t,$,i,n="#000"){const a=l(),r=Object.assign(a,{color:n,x:e,y:t,width:$,height:i,render:e=>{r.visible&&(e.fillStyle=r.color,e.fillRect(r.x,r.y,r.width,r.height),s(r,e))}});return r}function p(){return Object.assign(function(){let e=0,t=0,$=[];const i=Object.assign(l(),{children:$,add:e=>{e.parent&&e.detach(),e.parent=i,i.children.push(e),n()},addAt:(e,t)=>{e.parent&&e.detach(),e.parent=i,$.splice(t,0,e),n()},swap:(e,t)=>{if(e.uid===t.uid)return;const i=d($,e),n=d($,t);i<0||n<0||($[i]=t,$[n]=e)},remove:e=>{e.parent&&e.parent.uid===i.uid&&(function(e,t){for(var $=t.length;$>=0;$--)if(t[$]===e)return t.splice($,1),t}(e,i.children),e.parent=null,n())},removeAll:()=>{$.forEach((e=>{i.remove(e)})),$.length=0,n()},render:e=>{$.forEach((t=>{e.globalAlpha=t.alpha,s(i,e),t.render&&t.render(e),i.onEachRender&&i.onEachRender(t)}))},update:()=>{$.forEach((e=>{e.update&&e.update()}))},destroy:()=>{$.forEach((e=>{e.destroy&&e.destroy()})),i.removeAll()}});function n(){$.length>0&&(e=0,t=0,$.forEach(($=>{$.x+$.width>e&&(e=$.x+$.width),$.y+$.height>t&&(t=$.y+$.height)})),i.width=e,i.height=t)}return i}(),{isStage:!0,name:"stage"})}function y(){const e=p();return{uid:r(),stage:e,render:t=>{e.render(t)},update:()=>{e.update()},destroy:()=>{e.destroy()}}}function m(){let e;return{set:t=>{e&&e.destroy(),e=t()},render:t=>{const $=t.canvas;e?(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,$.width,$.height),e.render(t)):t.clearRect(0,0,$.width,$.height)},update:()=>{e&&e.update()},clear:()=>{e&&e.destroy(),e=null}}}var g={};function x(){for(let e in g)g[e]&&g[e].kill()}function D(e=0){const t=r(),$=At.timer;let i=!0,n=$.time,a=$.time;const o={dt:0,uid:t,_update:()=>{a=$.time},kill:()=>{i=!1,delete g[t]},reset:()=>{n=$.time}};return Object.defineProperties(o,{dt:{get:()=>$.time-n-e},running:{get:()=>i}}),g[t]=o,o}function B(e,t){const $=D(e),i=$._update,n=$.kill;return $.kill=()=>{n(),t&&t()},$._update=()=>{$.running&&$.dt>e&&$.kill(),i()},$}var C=96,E=96,w=(()=>{let t=!1;const $=new AudioContext,i=$.createGain(),n=[],a=[];let r=!0;function o(e,t){return(t-e)/t}function A(e){if(e>2e4)return null;var t=o(e,2e4);return 33&Math.pow(30*e,.3)?t:-t}function d(e){if(e>2e4)return null;var t=o(e,2e4);return 33&Math.pow(5e5*e,.3)?t:-t}function s(e){if(e>2e4)return null;var t=o(e,2e4);return e*=.7,133&Math.pow(50*e,.8)?t:-t}function l(e){var t=13e3,$=t/3;if(e>t)return null;var i=Math.pow(o(e,t),3.1);return Math.pow(e,1.08)&(e<$?98:99)?i:-i}function h(e){return e>25e3?null:(65535&(e^e>>3^e*e*7.3^e<<4))/65536*o(e,25e3)}function c(e){return(e*=1.4)>2e4?null:(130&Math.pow(e,1.055)?1:-1)*Math.pow(o(e,2e4),2)}function f(e){var t=[0,4,7,12,void 0,7,12],$=35e3;if(e>$)return null;var i=t[t.length*e/$|0];if(void 0===i)return 0;var n=.8*Math.pow(2,i/12),a=o(e*t.length%$,$);return e*n&64?a:-a}function u(e){return.8*(2*Math.random()-1)*Math.exp(-e/800)}function p(){n.forEach((e=>e.close())),n.length=0,a.forEach((e=>clearTimeout(e))),a.length=0,t=!1}function y(e=!0){n.forEach((t=>e?t.suspend():t.resume()))}function m(t){p(),function(t,$,i,a,r,o,A,d){const s=new AudioContext,l=s.createGain();t.forEach((function(t){var n=s.createOscillator();n&&(n.connect(l),l.connect(s.destination),n.start(t[0]*o),n.frequency.setValueAtTime($*e(1.06,13-t[1]),t[0]*o),n.type=d,l.gain.setValueAtTime(A,t[0]*o),l.gain.setTargetAtTime(1e-5,t[0]*o+a,r),n.stop(t[0]*o+i))})),n.push(s)}([[7,11],[2,23],[5,13],[3,11],[4,11],[6,11],[8,23],[7,23],[10,23],[9,13],[11,11],[12,11],[13,13],[15,11],[14,11],[17,13],[15,23],[16,23],[18,23],[21,11],[22,11],[17,20],[19,23],[23,13],[23,20],[24,11],[25,11],[26,13],[27,11],[28,11],[25,23],[27,23],[29,20],[20,13],[0,23],[1,20],[3,23]],100,.18,.1,.005,.2,.03,"sawtooth"),r||y();const $=setTimeout((()=>m(t)),t);a.push($)}return window.addEventListener("focus",(()=>{r=!0,y(!1)})),window.addEventListener("blur",(()=>{r=!1,y()})),{play:function(e){var t=null;switch(e){case"fxPistol":t=d;break;case"fxTele":t=s;break;case"fxSpawnD":t=l;break;case"fxSuperT":t=h;break;case"fxPunch":t=A;break;case"fxPick":t=c;break;case"fxWin":t=f;break;case"fxLanded":t=u}t&&function(e,t){i.gain.value=t||1,i.connect($.destination);const n=$.createBuffer(1,96e3,48e3),a=n.getChannelData(0);for(var r=96e3;r--;)a[r]=e(r);const o=$.createBufferSource();o.buffer=n,o.connect(i),o.start()}(t,"fxPunch"===e?.2:.5)},music:function(){t||(t=!0,function(){const e=setTimeout((()=>m(3700)),1e3);a.push(e)}())},killMusic:p}})();function v(e,t=0,$=0,i="#fff"){const n=u(0,0,t,$,i);n.name=`${e}.body`;const a={uid:r(),name:e,width:t,height:$,health:1,alpha:1,x:0,y:0,vx:0,vy:0,speedX:.8,jForce:2.8,flipH:1,dGravity:.5,jGravity:.2,gravity:.5,body:n,addTo:(e,t)=>{void 0!==t?(e.addAt(a.body,t),e.addAt(a.skin,t)):(e.add(a.body),e.add(a.skin)),a.parent=e},setVisible:(e,t)=>{a.body.visible=e,a.skin.visible=t},setBody:(e,t,$)=>{a.body.width=e,a.body.height=t,a.body.color=$||a.body.color},update:()=>{a.body.update(),function(){const e=a.skin;e&&(e.scaleX=a.flipH,a.isFlipH()?e.x=a.body.x+a.body.width:e.x=a.body.x,e.y=a.body.y,e.update())}(),function(){a.vy+=a.gravity,a.y+=a.vy,a.x+=a.vx,!a.grounded&&a.vy>0&&(a.falling=!0);a.grounded&&a.falling&&(a.onLanded(),a.falling=!1)}()},render:e=>{a.body.render(e),a.skin.render(e)},addSkin:t=>{a.skin=f(t),a.skin.name=`${e}.skin`},vsPlatforms:(e,t)=>{e.forEach((e=>{var t=o(a.body,e);t.hit&&("bottom"===t.side?(a.grounded=!0,a.gravity=a.dGravity,a.y=a.y-t.overlap.y,a.resetVy()):"top"===t.side?(a.y=a.y+t.overlap.y,a.resetVy()):"right"===t.side?(a.x=a.x-t.overlap.x,a.vx-=a.speedX):"left"===t.side&&(a.x=a.x+t.overlap.x,a.vx+=a.speedX))}))},vsHurts:(e,t)=>{for(let t=0;t<e.length;t++){const $=e[t];if(A(a.body,$)){a.receiveDamage(1,$);break}}},addSfx:e=>{const t=dt.sfxPool.get(e);t&&(a.parent.add(t),t.x=a.x+a.width/2-t.width/2,t.y=a.y+a.height-t.height,t.start(0))},explode:e=>{const t=dt.dexpPool.get(e);t&&t.addTo(a.x,a.y,a.parent)},receiveDamage:(e,t)=>{a.dead||(a.health-=e,a.health<=0&&(a.health=0,a.kill()))},doFlipH:()=>{a.flipH*=-1},kill:()=>{a.dead=!0},reset:()=>{a.skin&&a.skin.stop(),a.parent=null,a.flipH=1,a.health=1,a.dead=!1,a.moving=!1,a.grounded=!1,a.jumping=!1,a.falling=!1,a.attacking=!1,a.resetVx(),a.resetVy(),a.resetGravity()},detach:()=>{a.skin.stop(),a.skin.detach(),a.body.detach(),a.parent=null,a.reserved=!1},resetVx:()=>{a.vx=0},resetVy:()=>{a.vy=0},voidGravity:()=>{a.gravity=0},resetGravity:()=>{a.gravity=a.dGravity},isFlipH:()=>-1===a.flipH,onLanded:()=>{}};return Object.defineProperties(a,{x:{set:e=>{a.body.x=e},get:()=>a.body.x},y:{set:e=>{a.body.y=e},get:()=>a.body.y},width:{set:e=>{a.body.width=e},get:()=>a.body.width},height:{set:e=>{a.body.height=e},get:()=>a.body.height},active:{get:()=>a.skin.parent&&a.body.parent&&!a.dead&&a.skin.visible}}),a}var b={mojo:{dig:{w:8,h:8,frames:"$27A1B2$5C2B1$4D1C3$4D1E2D2$2D1E4D1$1|$35A1B2$5C2B1$4D1C3$4D1E2D2$1|$51A1B2$5C2B1$2",palette:{A:"#333c57",B:"#b13e53",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8},rise:{w:8,h:8,frames:"$51A1B2$5C2B1$2|$35A1B2$5C2B1$4D1C3$4D1E2D2$1|$27A1B2$5C2B1$4D1C3$4D1E2D2$2D1E4D1$1",palette:{A:"#333c57",B:"#b13e53",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8},run:{w:8,h:8,frames:"$3A1B2$5C2B1$4D1C3$4D1E2D2$2D1E4D1$2D1E4D1$2D1E1$2E1D1$2E1$4E1$1|$4A1B2$5C2B1$3D2C3$2D1E4D2$1D1E4$1D1$1D2E3$1D1$2E1$2E1$4E1$2E1$2|$1A1B2$5C2B1$5C3$5D1E2D3$2D1E4$1D2$1E4$4E2$1E1$5F1E1$3|$2A1B2$5C2B1$5C3$4D2E2D3$1D1E4$3D1E4$3D1E1$2E1$4E1$1E1$3|$2A1B2$5C2B1$5C3$4D2E2D3$1D1E4$3D1E4$3D1E1$2E1$4E1$1E1$3",palette:{A:"#333c57",B:"#b13e53",C:"#a7f070",D:"#ffcd75",E:"#257179",F:"#29366f"},fps:8}},ryan:{dig:{w:8,h:8,frames:"$35A1B2$4A1C1B2$4A1C1$1C1$4D1C1D1C1$2|$43A1B2$4A1C1B2$4A1C1$1C1$2|$51A1B2$4A1C1B2$2",palette:{A:"#38b764",B:"#a7f070",C:"#ffcd75",D:"#257179"},fps:8},rise:{w:8,h:8,frames:"$51A1B2$4A1C1B2$2|$43A1B2$4A1C1B2$4A1C1$1C1$2|$35A1B2$4A1C1B2$4A1C1$1C1$4D1C1D1C1$2",palette:{A:"#38b764",B:"#a7f070",C:"#ffcd75",D:"#257179"},fps:8},run:{w:8,h:8,frames:"$12A2$5B1A2$5C1B1C2$4C1B1$1C1$4C1D1$5D1$2D1$4D1$2D1$2|$19B1A2$4B1C1A2$4B1C1$1C1$4D1C1D1C1$3D1$2D1C1$2D1$3D1$3|$12D2$5B1C1D1$5B2C2$4B2$1C1$4D2$5D2$1D1$4D1$2D1$2|$20A2$5C1A2$5C1B1C1$5C1D1C1$4D3C1$3D1$2D1$3",palette:{A:"#a7f070",B:"#38b764",C:"#ffcd75",D:"#257179"},fps:8}},thor:{dig:{w:8,h:8,frames:"$27A2$5B1C1A1$5D1B2D3$2D1B2$5D1E2$3|$35A2$5B1C1A1$5D1B2D2$3D1B2$3|$51A2$5B1C1A1$3",palette:{A:"#b13e53",B:"#38b764",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8},rise:{w:8,h:8,frames:"$51A2$5B1C1A1$3|$35A2$5B1C1A1$5D1B2D2$3D1B2$3|$27A2$5B1C1A1$5D1B2D3$2D1B2$5D1E2$3",palette:{A:"#b13e53",B:"#38b764",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8},run:{w:8,h:8,frames:"$11A2$5B1C1A1$5D1B2D3$2D1B2$5D1E2$5E1$1E1$5D1$1D1$3|$3A2$5B1C1A1D1$4D1B2$1D2$1D1B3$4D1B3$5E4$3D1E1$2D1$10|$11A2$6C1A1$2D1$2D1B2D2$3D1B2$5D1B2$5E3$7D1$3|$3A2$5B1C1A1$4D2B2D3$1D1B3$5B3$5E3$6D1$12",palette:{A:"#b13e53",B:"#38b764",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8}}};function F(e,t,$,i){let n,a;const r=v(e,t,$,i),d=r.detach,s=r.update,l=r.kill,h=Object.assign(r,{type:e.split("_")[0],update:()=>{s(),"run"===n&&(h.grounded&&(h.moving=!0,h.vx=h.flipH*h.speedX),h.skin.play("run")),h.watchFlip()},changeState:e=>{switch(n=e,a||(h.reserved=!1),e){case"dig":h.moving=!1,h.resetVx(),h.skin.play("dig"),h.addSfx("emergeDusts");break;case"rise":h.moving=!1,h.resetVx(),h.skin.play("rise"),h.addSfx("emergeDusts")}},watchFlip:()=>{h.isFlipH()?h.skin.scaleX>0&&(h.skin.scaleX*=-1):h.skin.scaleX<0&&(h.skin.scaleX*=-1)},vsReversers:(e,t)=>{e.forEach((e=>{const t=o(h.body,e);t.hit&&("right"===t.side?(h.x=h.x-t.overlap.x,h.vx-=h.speedX):"left"===t.side&&(h.x=h.x+t.overlap.x,h.vx+=h.speedX),h.doFlipH())}))},vsHiders:(e,t)=>{if("dig"!==n)for(let t=0;t<e.length;t++){const $=e[t];if(A(h.body,$)){h.changeState("dig");break}}},vsPlayer:(e,t)=>{A(h.body,e.body)&&e.receiveDamage(1,h)},waitForTrigger:e=>{a=e,h.setVisible(!1,!1)},onTrigger:(e,t,$=!0)=>{h.flipH=t,h.changeState(a),h.skin.visible=!0,a=null,$&&w.play("fxSuperT")},disappear:()=>{h.dead=!0,h.detach()},kill:()=>{l(),h.setVisible(!1,!1),h.explode("enemy"),B(1,h.detach)},detach:()=>{h.parent&&(d(),a=null)},isToBeTriggered:()=>!h.dead&&a&&h.parent}),c=b[h.type];return h.speedX=function(){switch(h.type){case"mojo":return.2;case"ryan":return.3;case"thor":return.4;default:return.5}}(),h.addSkin({dig:{texture:c.dig,loop:!1},rise:{texture:c.rise,loop:!1},run:{texture:c.run,loop:!0}}),h.skin.stop(),h.skin.onComplete=e=>{"rise"===e&&h.changeState("run"),"dig"===e&&h.disappear()},h}var k={w:8,h:8,frames:"$21A2$6A2$3B3A1$4B3A1$4B3A1$3A5$2|$26B3$5B3A2$3B3A2$3A4$3A5$2",palette:{A:"#ffcd75",B:"#b13e53"},fps:5},G={w:8,h:8,frames:"$27A3$5A3B2$2A4B2$2A1B4$2B5$2|$22B2$4A2B2$2A4B1$3A4B1$3A4B1$1B7$1|$26A4$4A3B2$3A3B2$3A3B1$3B5$2|$21B2$6B2$3A3B1$4A3B1$4A3B1$4B4$2",palette:{A:"#b13e53",B:"#ffcd75"},fps:8},H={w:8,h:8,frames:"$13A2$6A2$6A2$3B3A1$4B3A1$4B3A1$4B3$3",palette:{A:"#ffcd75",B:"#b13e53"},fps:1},P={w:8,h:8,frames:"$11A2$6A2$7B1A1$4B3A1$4B3A1$4B3A1$7A2$1",palette:{A:"#ffcd75",B:"#b13e53"},fps:1},j={w:8,h:8,frames:"$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2",palette:{A:"#ffcd75",B:"#b13e53",C:"#ef7d57"},fps:8},_={w:8,h:8,frames:"$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2|$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2|$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2",palette:{A:"#ffcd75",B:"#b13e53",C:"#ef7d57"},fps:12};function T(e,t,$,i){let n,a=!1;const r=[],o=v(e,t,$,i),s=o.addTo,l=o.update,h=o.kill,c=Object.assign(o,{powers:r,addTo:(e,t)=>{s(e,t),c.setVisible(!1,!0),u()},update:()=>{l(),function(){rt.is("right").down?c.attacking||(c.flipH=1,c.changeState("run")):rt.is("left").down?c.attacking||(c.flipH=-1,c.changeState("run")):c.grounded&&!c.attacking&&c.changeState("idle");c.grounded&&(c.jumping=!1,a=!1);c.attacking&&(c.resetVx(),c.resetVy(),c.voidGravity())}()},syncPowers:u,changeState:e=>{switch(n=e,e){case"idle":c.moving=!1,c.resetVx(),c.skin.play("idle");break;case"run":!function(){c.jumping||(c.speedX=.3);c.moving=!0,c.vx=c.flipH*c.speedX,c.grounded&&c.skin.play("run")}();break;case"jump":c.speedX=.8,c.jumping=!0,c.grounded=!1,c.gravity=c.jGravity,c.vy-=c.jForce,c.skin.play("jump"),w.play("fxSpawnD");break;case"hurt":c.skin.play("hurt");break;case"attack":!function(){const e=c.currentPower.name;let $="throw";c.attacking=!0,c.jumping&&!a&&(a=!0);(function(e){switch(e){case"fireball":{const $=dt.powerPool.get(e);if(!$)return;$.addTo(c.parent),$.x=c.x+t/2-$.width/2,$.y=c.y,$.flipH=c.flipH,$.play(),w.play("fxPunch"),p();break}case"laserBeam":{const t=dt.powerPool.get(e);if(!t)return;t.addTo(c.parent),t.flipH=c.flipH,t.scaleX=c.flipH;const $=2;t.x=c.isFlipH()?c.x-t.width+$:c.x+c.width-$,t.y=c.y,t.play(),w.play("fxPistol"),p();break}}})(e),"laserBeam"===e&&($="shootLaser");c.skin.play($)}()}},vsEnemyTriggers:(e,t,$)=>{e.forEach((($,i)=>{if(A(c.body,$)){let e=$.nodes;t.forEach((t=>{if(t.isToBeTriggered())for(let n=0;n<e.length;n++){const a=e[n];if(a.x===t.x&&a.y===t.y){const e=t.x>c.x?-1:1;t.onTrigger($,e),$.register(i);break}}}))}if($.isJobDone()){const t=d(e,$);e.splice(t,1),$.kill()}}))},vsDoors:(e,t)=>{for(let t=0;t<e.length;t++){const $=e[t];if(A(c.body,$)){dt.scene.next();break}}},kill:()=>{h(),c.setVisible(!1,!1),w.play("fxPunch"),c.explode("player"),B(1,f)}});function f(){c.detach(),dt.scene.reload()}function u(){r.length&&(r[0]=ot.fireBall,r[1]=ot.laserBeam,c.currentPower.total||y())}function p(){let e=c.currentPower.total;if(e-=1,e<0&&(e=0),c.currentPower.total=e,!c.currentPower.total)for(let e=0;e<r.length;e++){if(r[e].total){m(e);break}}}function y(){if(c.dead)return;let e=r.indexOf(c.currentPower);e+=1;const t=()=>{e>=r.length&&(e=0)};r.forEach((($,i)=>{i===e&&0===$.total&&(e+=1,t())})),t(),m(e)}function m(e=0){c.powers[e].total&&(c.currentPower=c.powers[e],ot.currentPowerName=c.currentPower.name)}return r.length=0,r.push(ot.fireBall),r.push(ot.laserBeam),c.currentPower=r[0],c.addSkin({idle:{texture:k},run:{texture:G},jump:{texture:H,loop:!1},hurt:{texture:P,loop:!1},shootLaser:{texture:_,loop:!1},throw:{texture:j,loop:!1}}),c.skin.play("idle"),c.skin.onComplete=e=>{("throw"===e||"shootLaser"===e)&&(c.attacking=!1,c.gravity=c.jumping?c.jGravity:c.dGravity)},c.onLanded=()=>{c.addSfx("impactDusts"),w.play("fxLanded")},rt.is("jump").onDown=function(){if(c.jumping)return;c.grounded&&!c.attacking&&c.changeState("jump")},rt.is("attack").onDown=function(){if(c.dead)return;if(c.attacking||a||0===c.currentPower.total)return;c.changeState("attack")},rt.is("select").onDown=y,c}var S={w:1,h:1,frames:"A|B|C",palette:{A:"#5d275d",B:"#b13e53",C:"#ef7d57"},fps:1},X={w:1,h:1,frames:"A|B|C",palette:{A:"#29366f",B:"#257179",C:"#38b764"},fps:1};function O(e,t,$){const i=c(e,!1,!1);i.name="death-explosion";const n=(a=0,A=i.totalFrames-1,Math.floor(Math.random()*(A-a+1))+a);var a,A;i.start(n);const d=u(0,0,e.w,e.h,"ff0000");d.name=i.name+".body",d.visible=!1;let s=1;const l={uid:r(),speedX:.1,dg:.1,g:.1,x:t,y:$,vx:0,vy:0,alpha:s,addTo:(e,t)=>{void 0!==t?(e.addAt(d,t),e.addAt(i,t)):(e.add(d),e.add(i)),l.parent=e},update:(e,t)=>{i.x=d.x,i.y=d.y,d.update(),i.update(),l.vy+=l.g,l.y+=l.vy,l.grounded?h():l.x+=l.vx,e&&e.length&&p(e),t&&t.length&&p(t)},render:e=>{d.render(e),i.render(e)},kill:()=>{i.detach(),d.detach(),l.parent=null,l.reserved=!1,h(),f()}};function h(){l.vx=0}function f(){l.vy=0}function p(e){e.forEach((e=>{var t=o(d,e);t.hit&&("bottom"===t.side?(l.grounded=!0,l.g=l.dg,l.y=l.y-t.overlap.y,f()):"top"===t.side?(l.y=l.y+t.overlap.y,f()):"right"===t.side?(l.x=l.x-t.overlap.x,l.vx-=l.speedX):"left"===t.side&&(l.x=l.x+t.overlap.x,l.vx+=l.speedX))}))}return d.x=l.x,d.y=l.y,l.vx=(2*Math.random()-1)*l.speedX,l.vy=Math.random()*-(l.vy-2)*Math.cos(Math.abs(l.vx)/l.speedX)-2,Object.defineProperties(l,{x:{set:e=>{d.x=e},get:()=>d.x},y:{set:e=>{d.y=e},get:()=>d.y},alpha:{set:e=>{i.alpha=e,s=e},get:()=>s},active:{get:()=>Boolean(d.parent)}}),l}function M(e,t,$=3){const i=[];let n;const a={name:e,kill:()=>{i.forEach((e=>{e.kill()})),i.length=0,n=null},update:(e,t)=>{i.forEach((i=>{var a,r,o;i.update(e,t),n&&n.running&&(i.alpha=(a=n.dt,(o=1)+(a-(r=0))/($-r)*(0-o)))}))},render:e=>{i.forEach((t=>{t.render(e)}))},addTo:(e=0,r=0,o,A)=>{for(let $=0;$<8;$++){const $=O(t,e,r);$.addTo(o,A),i.push($)}n=B($,a.kill)}};return Object.defineProperties(a,{active:{get:()=>Boolean(i.length)}}),a}var I={w:16,h:16,frames:"$86A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$70|$70A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$86|$54A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$102|$70A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$86|$102A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$54",palette:{A:"#38b764",B:"#257179",C:"#5d275d",D:"#ef7d57",E:"#b13e53",F:"#f4f4f4",G:"#ffcd75"},fps:8},V={w:16,h:16,frames:"$105A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$55|$89A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$71|$73A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$87|$89A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$71|$105A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$55",palette:{A:"#f4f4f4",B:"#ef7d57",C:"#38b764",D:"#257179",E:"#ffcd75"},fps:8};function L(e,t){const $={name:e,x:0,y:0,width:0,height:0,loop:!0,points:1,followTarget:{x:0,y:0,width:8,height:8},followTargetSpeed:2,addTo:(e,t)=>{void 0!==t?(e.addAt($.body,t),e.addAt($.skin,t)):(e.add($.body),e.add($.skin)),$.parent=e},addBody:()=>{$.body=u(0,0,t.w,t.h,"#fff"),$.body.name=`${e}.body`,$.body.visible=!1},setBody:(e,t,i)=>{$.body.width=e,$.body.height=t,$.body.color=i||$.body.color},addSkin:()=>{$.skin=c(t,!1,$.loop),$.skin.name=`${e}.skin`,$.skin.onComplete=$.onComplete},update:()=>{if($.skin.x=$.body.x-$.body.width/2,$.skin.y=$.body.y-$.body.height/2,$.body.update(),$.skin.update(),$.gotHit){!function(e,t,$,i=!0,n=!0){var a=t.x-e.x,r=t.y-e.y,o=Math.sqrt(a*a+r*r);o>=$&&(i&&(e.x+=a/o*$),n&&(e.y+=r/o*$))}($,$.followTarget,$.followTargetSpeed);A($.body,$.followTarget)&&$.kill()}},render:e=>{},vsPlayer:(e,t)=>{if($.gotHit)return;A($.body,e.body)&&($.gotHit=!0,$.onHit(),e.syncPowers(),w.play("fxPick"))},onHit:()=>{$.stop(0)},kill:()=>{$.skin.stop(),$.body.detach(),$.skin.detach(),$.parent=null,$.reserved=!1,$.gotHit=!1},play:()=>{$.skin.visible=!0,$.skin.start()},stop:e=>{$.skin.stop(e)}};return Object.defineProperties($,{x:{set:e=>{$.body.x=e},get:()=>$.body.x},y:{set:e=>{$.body.y=e},get:()=>$.body.y},width:{set:e=>{$.body.width=e},get:()=>$.body.width},height:{set:e=>{$.body.height=e},get:()=>$.body.height},scaleX:{set:e=>{$.body.scaleX=e},get:()=>$.body.scaleX},active:{get:()=>Boolean($.body.parent&&$.skin.parent)}}),$}function N(e,t){const $=L(e,t),i=$.onHit;return $.followTarget={x:0,y:0,width:4,height:4},$.addBody(),$.addSkin(),$.onHit=()=>{ot.fireBall.total+=$.points,ot.setPlayerPower("fireball",ot.fireBall.total),i()},$}function R(e,t){const $=L(e,t),i=$.onHit;return $.followTarget={x:32,y:0,width:4,height:4},$.addBody(),$.addSkin(),$.onHit=()=>{ot.laserBeam.total+=$.points,ot.setPlayerPower("laserBeam",ot.laserBeam.total),i()},$}function W(){let e=0;const t={},$={},i={init:()=>{n("apple",{max:1,pool:[]}),n("corn",{max:1,pool:[]});for(let e in t){const $=e,i=t[$],n=i.max,a=i.pool;for(let e=0;e<n;e++){const t=`${$}_${e}`;switch($){case"apple":a.push(N(t,I));break;case"corn":a.push(R(t,V))}}}},update:(e,t)=>{for(let i in $){const n=$[i];n.active?(n.update(),n.vsPlayer(t,e)):delete $[i]}},render:e=>{for(let t in $){const i=$[t];i.active&&i.render(e)}},get:i=>{const n=t[i].pool;let a;for(let t=0;t<n.length;t++){const i=n[t];if(!i.active&&!i.reserved){a=i,e+=1,$[e]=a,a.reserved=!0;break}}return a},detach:()=>{for(let e in t){t[e].pool.forEach((e=>{e.kill()}))}!function(){for(let e in $)delete $[e]}()}};function n(e,$){t[e]=$}return i.init(),i}var Y={w:8,h:8,frames:"$19A2$5A1B1C1A1$4A1B2A1$5A2$19|$19A2$5A1D2A1$4A1D2A1$5A2$19|$19D2$5D1A2D1$4D1A2D1$5D2$19",palette:{A:"#b13e53",B:"#5d275d",C:"#ffcd75",D:"#ef7d57"},fps:12},q={w:96,h:8,frames:"$97A3B2$90A5B91A197B91$1A3B2$186|$97A3C2$90A5C91A197C91$1A3C2$186|$193D96A95D1A95$1D95$192|$193E96F95E1F95$1E95$192|$289D96A95$1D95$192|$289C95$1C95$288|$289C2$1C2$1C2$1C4$2C3$1C1$1C2$1C7$2C1$1C1$1C4$1C4$3C1$1C2$1C2$1C4$2C3$1C1$1C2$1C7$2C1$1C1$1C4$1C4$385|$289C2$14C1$1C2$1C7$2C1$1C1$1C2$24C3$12C1$2C1$1C1$1C4$393",palette:{A:"#f4f4f4",B:"#73eff7",C:"#b13e53",D:"#3b5dc9",E:"#ef7d57",F:"#ffcd75"},fps:10};function z(e,t){const $={name:e,flipH:1,speedX:1,x:0,y:0,vx:0,width:0,height:0,scaleX:1,loop:!0,addTo:(e,t)=>{void 0!==t?(e.addAt($.body,t),e.addAt($.skin,t)):(e.add($.body),e.add($.skin)),$.parent=e},addBody:()=>{$.body=u(0,0,t.w,t.h),$.body.name=`${e}.body`,$.body.visible=!1},addSkin:()=>{$.skin=c(t,!1,$.loop),$.skin.name=`${e}.skin`,$.skin.onComplete=$.onComplete},update:()=>{$.skin.x=$.body.x,$.skin.y=$.body.y,$.body.update(),$.skin.update()},render:e=>{},kill:()=>{$.skin.stop(),$.skin.detach(),$.body.detach(),$.parent=null,$.reserved=!1},play:()=>{$.skin.visible=!0,$.skin.start()},stop:()=>{$.skin.stop()},vsPlatforms:(e,t)=>{if($.allowHit)for(let t=0;t<e.length&&$.active;t++){const i=e[t];A($.body,i)&&($.onHitPlatform(i),$.kill())}},vsEnemies:(e,t)=>{for(let t=0;t<e.length;t++){const i=e[t];if(!$.active)break;A($.body,i.body)&&i.active&&(i.receiveDamage(1,$),$.onHitEnemy(i))}},onHitPlatform:e=>{},onHitEnemy:e=>{}};return Object.defineProperties($,{x:{set:e=>{$.body.x=e},get:()=>$.body.x},y:{set:e=>{$.body.y=e},get:()=>$.body.y},width:{set:e=>{$.body.width=e},get:()=>$.body.width},height:{set:e=>{$.body.height=e},get:()=>$.body.height},scaleX:{set:e=>{$.body.scaleX=e},get:()=>$.body.scaleX},active:{get:()=>Boolean($.body.parent&&$.skin.parent)}}),$}function J(e,t){const $=z(e,t),i=$.update,n=Object.assign($,{update:()=>{n.active&&(i(),n.vx=n.flipH*n.speedX,n.x+=n.vx)},onHitPlatform:e=>{const t=dt.sfxPool.get("fireballImpact");t&&(t.x=-1===n.flipH?n.x+n.width:n.x,t.y=n.y,t.scaleX=n.flipH,t.start(),n.parent.add(t))},onHitEnemy:e=>{n.kill()}});return n.allowHit=!0,n.addBody(),n.addSkin(),n}function K(e,t){const $=z(e,t),i=$.update,n=Object.assign($,{update:()=>{n.active&&(i(),n.skin.scaleX=n.body.scaleX,n.body.scaleX<0?n.skin.x=n.x+n.skin.width:n.skin.x=n.x)},onComplete:e=>{n.kill()}});return n.loop=!1,n.addBody(),n.addSkin(),n}function U(){let e=0;const t={},$={},i={init:()=>{n("fireball",{max:1,pool:[]}),n("laserBeam",{max:1,pool:[]});for(let e in t){const $=e,i=t[$],n=i.max,a=i.pool;for(let e=0;e<n;e++){const t=`${$}_${e}`;switch($){case"fireball":a.push(J(t,Y));break;case"laserBeam":a.push(K(t,q))}}}},update:(e,t,i)=>{for(let n in $){const a=$[n];a.active?(a.update(),a.vsPlatforms(t,e),a.vsEnemies(i,e)):delete $[n]}},render:e=>{for(let t in $){const i=$[t];i.active&&i.render(e)}},get:i=>{const n=t[i].pool;let a;for(let t=0;t<n.length;t++){const i=n[t];if(!i.active&&!i.reserved){a=i,e+=1,$[e]=a,a.reserved=!0;break}}return a},detach:()=>{for(let e in t){t[e].pool.forEach((e=>{e.kill()}))}!function(){for(let e in $)delete $[e]}()}};function n(e,$){t[e]=$}return i.init(),i}var Q={w:16,h:16,frames:"$70A4$11A6$9A8$8A8$8A8$8A8$9A6$11A4$70|$70B4$11B6$9B3C1B4$8B2C1B3C1B1$8B5C1B2$8B3C1B4$9B6$11B4$70|$18D1$8D1$7D2$5D1$9D2$3D2$9D3$1D2$3D3$5D10$6D4B2D3$4D4B2D1B1D3$7D3B4D2$8D3B3D2$9D2B1D4$9D6$9D7$8D5$11D2$13D1$12|$3D2$6D1$7D1$20A2$11D2A4$7D1$1E1D2E1A3D2$3D2$2D1E3A2D2E2D5$2E1D2E2D1E3A1D1$1D2$1A2D5E2A2$4A4E1D2E1A2$6A4E1D2A4$6A2E1D1E2D1A2$8A1D3E1D1A1$10A1E3$12A3$11D1$15D2$10|$8A1$4D2$7A3$5D1$5D2E1A1$2E1D2$6E1D1A3$1E1D3E2$4E2A3$1A2E4$3A1E2D1A1$2A2$2E2A1$3A1D2$2A2$4A2D2$6A1D3$4D1$2A1$3A3D2E1$5A3$2A4E2A1$5A1$4A1D2E1A3$10A1E2$1A1$6E2A1$13A1D2E2$12A1D2$24|$8A2$8E1D1$4A2$1E3$3E1D1$2A1$7E2$3D1$1A3$7E1$6A1$13A1$5E2$7A3$5D2$2A2$3A1$4A2E1D1$2A2$1A2$5A2E2$5A2$6E2$17A1$6E1$2A2$3A3$5E1D1$1A2$4A1$7E1D1E1$14E3$24|$6A3$9E1$4A1$5E2$3E2$10E2$1E1$3A1$14A2$19E1$16E1$20A1$2A2$4A2$4A2$2A2$4A1$19E2$2A1$6A1$4E1$4A1$6A1$2E1$7E1$16E2$16E1$9",palette:{A:"#333c57",B:"#f4f4f4",C:"#566c86",D:"#ffcd75",E:"#ef7d57"},fps:9},Z={w:16,h:16,frames:"$19A1$4A1$11A1$3A2$10A6$2A2$3A2$1A2B4A4$3A4B6A2$5A2B3C2B3A1$6A1B2C4B2A1$6A1B2C4B2A2$4A2B3C2B3A3$2A4B6A2$6A3B4A2$9A8$9A2$3A2$9A1$25|$8A1$10A1$4A2$9A2$4A1$3A2$13A2$2A2$5C4$1A1$4A2$1C8$9C6$10C2$1C2$2A2$6C3$1C1$4A2$5C3$2C2$1A4$2A2$1C3$1C3$5A2$3C2$2C1$17A1$8A1$5A3$7A1$6A2$6A1$11|$3A1$4A1$10A2$4A1$10A1$9A4$5C3$7A1$4C2$2C1$11C3$14C3$14C1$21A2$4C1$8A3$1A1$2C2$5C2$3A2$3C3$3C1$10C2$22A1$5A1$8A2$4A1$12|$3A1$27A1$7C2$5A1$7C2$33C2$15C2$34A2$16A2$18C2$7C1$7C2$5C2$32A1$17|$38C1$14C1$36C2$15C1$87C2$8C1$6C2$6C1$35|$20C2$14C1$54C1$16C1$85C1$16C1$9C1$34",palette:{A:"#94b0c2",B:"#f4f4f4",C:"#b13e53"},fps:10},ee={w:16,h:16,frames:"$177A1$11A2$3A2$6A1$2A2$2A4$4A3$6A2$2A2$1A3$10A2$2A1$2A1$2|$161A1$12A2$14A2$16A2$2A2$6A2$2A2$2A2$6A2$18|$146A1$24A2$2A3$9A2$1A4$1A2$14A1$9A1$34|$145A1$24A2$3A1$3A2$5A2$4A2$14A1$11A2$34|$177A1$1A1$6A2$2A2$3A1$12A2$10A2$34|$190A1$1A1$2A1$12A1$11A1$35|$206A1$1A1$47",palette:{A:"#f4f4f4"},fps:10},te={w:16,h:16,frames:"$195A2$13A3$7A2$4A2$7A3$5A3$4A3$3|$194A3$6A2$5A3$6A2$6A2$7A2$4A2$8A2$2|$178A2$8A2$3A3$8A3$2A2$10A2$33|$177A2$11A5$11A4$46|$174A4$13A3$62|$174A1$2A1$15A1$62",palette:{A:"#f4f4f4"},fps:10},$e={w:8,h:8,frames:"$13A2$5A3B1$1A2$1A2B2$1A2$3C2$4A2C2$4A3B1$5A2$1|$12A2$3A2$1A2B2$1A2$3B2$10A2$3B1$2A2$2B2$8|$10A1$3B1$6B2$1A1$3B2$15B1$3A1$3B1$10|$13B2$5B2$42|$12B1$51",palette:{A:"#b13e53",B:"#5d275d",C:"#ef7d57"},fps:12};function ie(e,t){const $=c(t,!1,!1),i=Object.assign($,{name:e,onComplete:e=>{i.kill()},kill:()=>{i.stop(),i.detach(),i.reserved=!1}});return i.visible=!0,Object.defineProperties(i,{active:{get:()=>i.parent}}),i}function ne(){let e=0;const t={},$={},i={init:()=>{n("impactDusts",{max:3,pool:[]}),n("blast",{max:1,pool:[]}),n("emergeDusts",{max:5,pool:[]}),n("bodyExplode",{max:5,pool:[]}),n("fireballImpact",{max:1,pool:[]});for(let e in t){const $=e,i=t[$],n=i.max,a=i.pool;for(let e=0;e<n;e++){const t=`${$}_${e}`;switch($){case"impactDusts":a.push(ie(t,te));break;case"emergeDusts":a.push(ie(t,ee));break;case"fireballImpact":a.push(ie(t,$e));break;case"blast":a.push(ie(t,Q));break;case"bodyExplode":a.push(ie(t,Z))}}}},update:()=>{for(let e in $){const t=$[e];t.active?t.update():delete $[e]}},get:i=>{const n=t[i].pool;let a;for(let t=0;t<n.length;t++){const i=n[t];if(!i.active&&!i.reserved){a=i,e+=1,$[e]=a,a.reserved=!0;break}}return a},detach:()=>{for(let e in t){t[e].pool.forEach((e=>{e.kill()}))}!function(){for(let e in $)delete $[e]}()}};function n(e,$){t[e]=$}return i.init(),i}var ae=[{name:"background",tileset:"tiles",data:[36,-1,-1,-1,36,-1,-1,-1,32,50,51,41,-1,-1,-1,54,-1,-1,-1,30,41,56,57,47,36,31,55,60,61,38,39,40,47,41,-1,-1,42,60,61,-1,-1,54,55,46,-1,47,-1,-1,-1,-1,-1,-1,-1,60,61,-1,10,10,10,-1,-1,-1,-1,-1,9,-1,-1,-1,16,16,16,11,0,15,1,4,15,15,5,3,1,1,1,5,6,7,7,7,7,7,7,7,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:96,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72}]},{name:"entities",entities:[{name:"player",id:1,x:8,y:48},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"apple_item",id:9,x:48,y:48,width:8,height:8}]},{name:"texts",entities:[{name:"text",id:0,x:0,y:80,width:8,height:8,values:{text:"Arrow Keys to Move",name:"move"}}]}];function re(e,t,$,a,r=1){const o=l();o.render;let A=a,d=r,c=i(String(o.uid)),f=c.canvas,u=c.ctx;const p=Object.assign(o,{text:A,texture:e,render:i=>{if(!p.visible||!p.texture)return;if(c.cached)return s(p,i),void i.drawImage(f,0,0);c.cached=!0;const n=function(){const e=A.split(""),$=t.map((e=>e[0])),i=t.map((e=>e[1])),n=e.map((e=>{const t=$.indexOf(e);return{id:t,w:i[t],l:e}}));return n}(),a=e.w,r=$;f.width=i.canvas.width,f.height=i.canvas.height,n.forEach(((e,t)=>{const $=e.id;let i=t%r*a;if(t){i=n.map((e=>e.w)).filter(((e,$)=>$<t)).reduce(((e,t)=>e+t),0)+p.gap*t}h(u,p.texture,$,i,0)})),s(p,u)},destroy:()=>{n(String(o.uid))}});function y(){c=i(String(o.uid)),f=c.canvas,u=c.ctx}return e&&(p.width=e.w,p.height=e.h),Object.defineProperties(p,{text:{set:e=>{A!==e&&(A=e,p.destroy(),y())},get:()=>A},gap:{set:e=>{d=e,p.destroy(),y()},get:()=>d}}),p}var oe=12,Ae={w:8,h:8,frames:"$4A1$1A1$4A1$1A1$1A1$1A1$1A1$1A3$1A1B1$1B1A1B1$2A2B2A1B1A1$1A1B2A1B1A1B1A1B1A1B3A1B1A1B1A1B1A1B2A1|$4A1$4A1$2A1$1A1$2A1$1A1$1A2$1A1$1B1A1$1A1$2A1B1A1B1$1B1$1B1A1B2A1B1A1B1A1B1A1B1A1B1A1B4A1B1A1B1A1B1|$1A1$1A1$4A1$1A1$1A1$3A3$1A1$1A1$2B1A1B1$1B1A1$1A1B1A1B2A2$1B1A1B1A1B2A1$1B1A1B3A1B1A2B2A1B1A1B1A1|$20A1$1A1$6A2$5A1$1A2$4A1$1A2$5A1$1B1$4A1B1A1B1|$17A1$1A1$2A1$1A1$1A1$1A1$1A1$1A1$1A2$1A1$1A3$1A1$1A3$1A2B1A2$1B1A1B2A2B2A1|$17A1$1A1$4A1$1A1$6A1$1A1$5A1$1A1$4A1$1A1B1$4B1A1B1A1$4|$1C8B10C2B2C18D2C2D2C1D4C1D11|C8B8C1B2C2B1C16D1C3D2C2D1C2D15|C7$1B7C3B2C2B2C9D2C2D1C2D3C2D2C1D16|$27E1F1$6E1F1$4E5F1$4E1F1$6E1F1$3|$2F1A1$2F1$3E1$3E1$1A1E2A1F1E1A1F1$1A1F1$2A1E1$1A1$1F1A2$1F1A1$2E1$3E1$1F1E1A1F1A2E1F1$1A1F1$1A1$1F1$1|$64|D1G1D3G2D1G3D2G2D11G2D1G2D3G2D1G2D3G2D6G1D3G1D1$2D3$3|D1G1D3G2D1G3D2G3D1G2D10G1D3G2D1G3D1G3D2G1D3G1D5$3D4$2|D6G1D2G3D1G3D1G4D1G1D1G4D5G3D16$1D3$2D2$2D1$1|$3F2$5F1E3$3F1E1F4$1F1E1F1H4F2E1F1H1F2H1F2A1F2H3I1A3H1A2I2B1A1F1B1A1B2A1|$1A2$3F1$3E1A2$1A1$1F1A2E1A1F1A1F1$1A1F1A1$2E1A1$2F1$1A1$1A1$2A1E1$1A1$1F1$1A1$1E1A2$1E1A1$1A2$1A4|$64|$36G1$7G1$7G1$6G2$3|$45G1$7G1$3G1$3G1$1G1|D1G1D3G2D1G3D2G2D11G2D1G2D3G2D1G2D3G2D6G1D3G1D9|D1G1D3G2D1G3D2G3D1G2D10G1D3G2D1G3D1G3D2G1D3G1D14|D6G1D2G3D1G3D1G4D1G1D1G4D5G3D28|$64|$6F1$4F1$2F1$4F1$2F1$1F1$2F1$2F1$1F1$2F1$2F1$1F1$2F1$2F1$1F1$1F1$4F2$1F1$4F1|F1$3F1$2F2$3F1$2F2$3F1$1F3$2F1$2F2$1F1$1F1$2F2$1F1$1F1$1F3$1F1$1F1$1F3$1F1$1F1$1F3|F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$4F2$2F1$3F2$2F1$3F2$2F1$12|$64|$64|$64|$11F1$13F1$1E1$1F1$13F1$20|$12F1$7F1$5F2E1F2$5F1$7F1$19|$19F1$6F1E1F1$6F1$28|$10F1$1F1$4F1$3F1$5E1$5F1$3F1$4F1$1F1$19|$64|$64|$4F1$37F1$21|$11F1$13F1$13F1$21F1$2|$3F1$34F1$25|$25F1$21F1$16|$21F1$42|$37F1$26|$14F1$20F1$11F1$16|$52F1$11|$1F1$19F1$18F1$1F1$21|$44F1$19|$64|$23F2$39|$64|$38F1$2F1$22|$22F1E1$5E3$4E2F1E1$4E4$3F1E4$3E2F1E2|$8E3F1$4E5$3E2F2$4E1F2$5E2F1$5E2$6E2$6|$64|$64|$60F1$3|$29F1$34|$3E1F3E1$3E2F1E2$4E4$4E4$5E3$6F1E1$16|E2$6F1E1$6E3$5E2F1$5E1F3$4E2F1E2$3E4$12|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64",palette:{A:"#29366f",B:"#38b764",C:"#257179",D:"#5d275d",E:"#f4f4f4",F:"#94b0c2",G:"#b13e53",H:"#566c86",I:"#333c57"},fps:1},de=14,se=[[" ",4],["!",1],['"',3],["#",5],["$",4],["%",5],["&",5],["'",1],["(",2],[")",2],["*",3],["+",3],[",",2],["-",3],[".",1],["/",5],["0",4],["1",2],["2",4],["3",4],["4",4],["5",4],["6",4],["7",4],["8",4],["9",4],[":",1],[";",1],["<",3],["=",3],[">",3],["?",4],["@",5],["A",4],["B",4],["C",3],["D",4],["E",3],["F",3],["G",4],["H",4],["I",3],["J",4],["K",4],["L",3],["M",5],["N",4],["O",4],["P",4],["Q",4],["R",4],["S",4],["T",3],["U",4],["V",4],["W",5],["X",4],["Y",4],["Z",3],["[",2],["\\",5],["]",2],["^",3],["_",4],["`",2],["a",4],["b",4],["c",3],["d",4],["e",4],["f",3],["g",4],["h",4],["i",1],["j",2],["k",4],["l",1],["m",5],["n",4],["o",4],["p",4],["q",4],["r",3],["s",4],["t",3],["u",4],["v",4],["w",5],["x",3],["y",4],["z",4],["{",3],["|",1],["}",3],["~",4]],le={w:8,h:8,frames:"$64|A1$7A1$7A1$15A1$31|A1$1A1$5A1$1A1$53|$1A1$1A1$4A5$4A1$1A1$4A5$4A1$1A1$28|$2A1$6A3$4A2$8A2$4A3$7A1$21|A1$2A1$7A1$6A1$6A1$7A1$2A1$27|$1A2$5A1$8A2$1A1$3A1$2A1$5A2$1A1$27|A1$7A1$55|$1A1$6A1$7A1$7A1$8A1$30|A1$8A1$7A1$7A1$6A1$31|A1$1A1$6A1$6A1$1A1$45|$9A1$6A3$6A1$38|$33A1$6A1$23|$16A3$45|$32A1$31|$4A1$6A1$6A1$6A1$6A1$31|$1A2$5A1$2A1$4A1$2A1$4A1$2A1$5A2$29|A2$7A1$7A1$7A1$7A1$30|A3$8A1$5A2$5A1$7A4$28|A3$8A1$5A2$8A1$4A3$29|$2A1$6A2$5A1$1A1$5A4$6A1$29|A4$4A1$7A3$8A1$4A3$29|$1A2$5A1$7A3$5A1$2A1$5A2$29|A4$7A1$6A1$6A1$7A1$30|$1A2$5A1$2A1$5A2$5A1$2A1$5A2$29|$1A2$5A1$2A1$5A3$7A1$5A2$29|$8A1$15A1$39|$8A1$15A1$7A1$31|$2A1$6A1$6A1$8A1$8A1$29|$8A3$13A3$37|A1$8A1$8A1$6A1$6A1$31|A3$8A1$5A2$14A1$30|$1A3$4A1$3A1$3A1$1A3$3A1$1A1$1A1$4A3$28|$1A2$5A1$2A1$4A1$2A1$4A4$4A1$2A1$28|A3$5A1$2A1$4A3$5A1$2A1$4A3$29|$1A2$5A1$7A1$7A1$8A2$29|A3$5A1$2A1$4A1$2A1$4A1$2A1$4A3$29|A3$5A1$7A3$5A1$7A3$29|A3$5A1$7A3$5A1$7A1$31|$1A3$4A1$7A1$1A2$4A1$2A1$5A3$28|A1$2A1$4A1$2A1$4A4$4A1$2A1$4A1$2A1$28|A3$6A1$7A1$7A1$6A3$29|$2A2$7A1$7A1$4A1$2A1$5A2$29|A1$2A1$4A1$1A1$5A2$6A1$1A1$5A1$2A1$28|A1$7A1$7A1$7A1$7A3$29|A1$3A1$3A2$1A2$3A1$1A1$1A1$3A1$3A1$3A1$3A1$27|A1$2A1$4A2$1A1$4A1$1A2$4A1$2A1$4A1$2A1$28|$1A2$5A1$2A1$4A1$2A1$4A1$2A1$5A2$29|A3$5A1$2A1$4A1$2A1$4A3$5A1$31|$1A2$5A1$2A1$4A1$2A1$4A1$2A1$5A2$8A1$20|A3$5A1$2A1$4A1$2A1$4A3$5A1$2A1$28|$1A3$4A1$8A2$8A1$4A3$29|A3$6A1$7A1$7A1$7A1$30|A1$2A1$4A1$2A1$4A1$2A1$4A1$2A1$5A2$29|A1$2A1$4A1$2A1$4A1$1A1$5A1$1A1$6A1$30|A1$3A1$3A1$1A1$1A1$3A1$1A1$1A1$3A1$1A1$1A1$4A1$1A1$28|A1$2A1$4A1$2A1$5A2$5A1$2A1$4A1$2A1$28|A1$2A1$4A1$2A1$5A3$7A1$5A2$29|A3$7A1$6A1$6A1$7A3$29|A2$6A1$7A1$7A1$7A2$30|A1$8A1$8A1$8A1$8A1$27|A2$7A1$7A1$7A1$6A2$30|$1A1$6A1$1A1$53|$32A4$28|A1$8A1$54|$9A3$4A1$2A1$4A1$2A1$5A3$28|A1$7A3$5A1$2A1$4A1$2A1$4A3$29|$9A2$5A1$7A1$8A2$29|$3A1$5A3$4A1$2A1$4A1$2A1$5A3$28|$9A2$5A1$1A2$4A2$7A2$29|$2A1$6A1$6A3$6A1$7A1$30|$9A3$4A1$2A1$4A1$2A1$5A3$7A1$5A2$13|A1$7A3$5A1$2A1$4A1$2A1$4A1$2A1$28|A1$15A1$7A1$7A1$31|$1A1$15A1$7A1$7A1$7A1$6A1$15|A1$7A1$2A1$4A1$1A1$5A3$5A1$2A1$28|A1$7A1$7A1$7A1$7A1$31|$8A4$4A1$1A1$1A1$3A1$1A1$1A1$3A1$1A1$1A1$27|$8A3$5A1$2A1$4A1$2A1$4A1$2A1$28|$9A2$5A1$2A1$4A1$2A1$5A2$29|$8A3$5A1$2A1$4A1$2A1$4A3$5A1$7A1$15|$9A3$4A1$2A1$4A1$2A1$5A3$7A1$7A1$12|$8A1$1A1$5A2$6A1$7A1$31|$9A3$4A2$8A2$4A3$29|$1A1$6A3$6A1$7A1$8A1$29|$8A1$2A1$4A1$2A1$4A1$2A1$5A3$28|$8A1$2A1$4A1$2A1$4A1$1A1$6A1$30|$8A1$1A1$1A1$3A1$1A1$1A1$4A1$1A1$5A1$1A1$28|$8A1$1A1$6A1$7A1$6A1$1A1$29|$8A1$2A1$4A1$2A1$4A1$2A1$5A3$7A1$5A2$13|$8A4$6A1$6A1$6A4$28|$1A2$6A1$6A1$8A1$7A2$29|A1$7A1$7A1$7A1$7A1$31|A2$7A1$8A1$6A1$6A2$30|$1A1$1A1$4A1$1A1$53|$64|$64|$64",palette:{A:"#ffffff"}};function he(e){const t=dt.actorPool,$=dt.sfxPool,i=dt.powerPool,n=dt.dexpPool,a=dt.itemsPool,r=y(),o=r.destroy,A=Object.assign(r,{destroy:()=>{t.detach(),$.detach(),i.detach(),n.detach(),a.detach(),o()}}),s=A.stage,l=[],h=[],c=[],f=[],p=[],m=[],g=[],x=[],D=[];let B;function C(){return B&&B.active}return e.forEach(((e,$)=>{if($){const $=e.name;e.entities.forEach((e=>{var i,n;const r=e.name,o=null!=(i=e.width)?i:Ae.w,A=null!=(n=e.height)?n:Ae.h,d=e.x,y=e.y,C=e.values,E=e.nodes,w=e=>{const t=u(0,0,o,A,e);return t.x=d,t.y=y,t.visible=!1,s.add(t),t};if("entities"===$){if("player"===r&&(B=t.getPlayer(),B.reset(),B.setBody(o,A,"#ff0000"),B.x=d,B.y=y,B.addTo(s)),r.includes("enemy")){const e=r.split("_")[1],$=C.flipH,i=C.state,n=C.triggered,a=t.getEnemy(e);a.reset(),a.setBody(o,A,"#ff0000"),a.flipH=$,a.x=d,a.y=y,a.addTo(s,0),h.push(a),n?a.waitForTrigger(i):(a.waitForTrigger(i),a.onTrigger(null,$,!1))}if(r.includes("item")){const e=r.split("_")[0],t=a.get(e);t.x=d,t.y=y,t.play(),t.setBody(o,A),t.body.visible=!1,t.addTo(s,0),c.push(t)}if("triggerEnemy"===r){const e=function(e,t,$,i){let n=e,a=n.map((()=>!1));const r=u(0,0,t,$,i),o=Object.assign(r,{nodes:n,width:t,height:$,register:e=>{a[e]=!0},isJobDone:()=>!a.includes(!1),kill:()=>{o.detach()}});return o}(E,o,A,"#257179");e.x=d,e.y=y,e.visible=!1,s.add(e),x.push(e)}"hurt"===r&&m.push(w()),"door"===r&&p.push(w()),"hideEnemy"===r&&g.push(w())}if("collision"===$&&"platform"===r&&l.push(w("#4ed72d")),"reversers"===$&&"reverser"===r&&f.push(w("#ffcd75")),"texts"===$){const e=re(le,se,de,C.text);C.name&&(e.name=C.name),e.x=d+o/2,e.y=y,s.add(e),D.push(e)}}))}})),A.update=()=>{ot.loaded&&(ot.loaded=!0,function(){C()&&(B.update(),B.vsPlatforms(l,s),B.vsEnemyTriggers(x,h,s),B.vsHurts(m,s),B.vsDoors(p,s));h.forEach((e=>{if(e.active)e.update(),e.vsPlatforms(l,s),e.vsReversers(f,s),e.vsHurts(m,s),e.vsHiders(g,s),C()&&e.vsPlayer(B,s);else if(!e.isToBeTriggered()){const t=d(h,e);h.splice(t,1)}})),$.update(),i.update(s,l,h),n.update(l,m),a.update(s,B)}())},A}function ce(e){const t=y(),$=t.stage,a=function(e,t,$){const a=l(),r=i(String(a.uid)),o=r.canvas,A=r.ctx,d=Object.assign(a,{texture:e,render:i=>{if(!d.visible||!d.texture)return;if(r.cached)return void i.drawImage(o,0,0);r.cached=!0,o.width=i.canvas.width,o.height=i.canvas.height;const n=e.w;t.forEach(((e,t)=>{if(e>-1){const i=t%$*n,a=Math.floor(t/$)*n;h(A,d.texture,e,i,a)}}))},destroy:()=>{n(String(a.uid))}});return e&&(d.width=e.w,d.height=e.h),d}(Ae,e,oe);return $.add(a),t}function fe(){return ot.resetPlayerProgress(),he(ae)}function ue(){return ce(ae[0].data)}var pe=[{name:"background",tileset:"tiles",data:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"texts",entities:[{name:"text",id:0,x:24,y:32,width:8,height:8,values:{text:"- You Win!",name:"win"}},{name:"text",id:1,x:16,y:64,width:8,height:8,values:{text:"'R' to Restart",name:"restart"}},{name:"text",id:2,x:0,y:88,width:8,height:8,values:{text:"yellosubmarine.itch.io",name:"link"}}]}];function ye(){const e=[],t=pe,$=y(),i=$.destroy,n=$.stage,a=u(0,0,C,E);function r(t=!0){e.forEach((e=>{"restart"===e.name&&(e.visible=t)}))}return n.add(a),ot.gameWin=!0,$.destroy=()=>{i()},t.forEach(((t,$)=>{if($){const $=t.name;t.entities.forEach((t=>{var i,a;t.name;const r=null!=(i=t.width)?i:Ae.w,o=(null!=(a=t.height)||Ae.h,t.x),A=t.y,d=t.values;t.nodes;if("texts"===$){const t=re(le,se,de,d.text);d.name&&(t.name=d.name),t.x=o+r/2,t.y=A,n.add(t),e.push(t)}}))}})),r(!1),B(4,(()=>{!function(t=!0){e.forEach((e=>{"link"===e.name&&(e.visible=t)}))}(!1)})),B(2,(()=>{r(!0)})),rt.is("restart").onDown=()=>{ot.gameWin&&(w.music(),ot.gameWin=!1,dt.scene.set(1))},w.killMusic(),w.play("fxWin"),$}var me={w:16,h:16,frames:"$21A1B3A1$12B3$14A1$27C1D8C1$6D1$2E1F1$1E1$2D1$6D1$3E1F1$3D1$6D1$1G1B1G2B1G1$1D1$6D1$1H1D1A1B2H1$1D1$6D1$1H2D1H3$1D1$6D1$1G1H4G1$1D1$6C1D8C1$51|$5A1B3A1$12B3$14A1$44C1D6C1$8D1$1E1F1$1E1$1D1$8D1$2E1F1$2D1$8D1G1B1G2B1G1D1$8D1H1D1A1B2H1D1$8D1H2D1H3D1$8D1G1H4G1D1$8C1D6C1$52",palette:{A:"#ffcd75",B:"#ef7d57",C:"#41a6f6",D:"#f4f4f4",E:"#38b764",F:"#257179",G:"#5d275d",H:"#b13e53"},fps:5},ge={w:16,h:16,frames:"$102A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$54",palette:{A:"#38b764",B:"#257179",C:"#5d275d",D:"#ef7d57",E:"#b13e53",F:"#f4f4f4",G:"#ffcd75"},fps:1},xe={w:16,h:16,frames:"$21A1B3A1$12B3$14A1$27C1D8C1$6D1$5D1B1$1D1$6D1$1E2F1D1B1A1$1D1$6D1$2F1D1B1A1B1$1D1$6D1$1F1A1B1A1B1$2D1$6D1$1E1B1A1E2$2D1$6D1$1E1F1E1F1E1$2D1$6C1D8C1$51|$5A1B3A1$12B3$14A1$44C1D6C1$8D1$4D1B1D1$8D1E2F1D1B1A1D1$8D1$1F1D1B1A1B1D1$8D1F1A1B1A1B1$1D1$8D1E1B1A1E2$1D1$8D1E1F1E1F1E1$1D1$8C1D6C1$52",palette:{A:"#ffcd75",B:"#ef7d57",C:"#41a6f6",D:"#f4f4f4",E:"#38b764",F:"#257179"},fps:5},De={w:16,h:16,frames:"$105A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$55",palette:{A:"#f4f4f4",B:"#ef7d57",C:"#38b764",D:"#257179",E:"#ffcd75"},fps:1};function Be(e,t=0,$=0,i="#fff"){const n=u(0,0,t,$,i);n.name=`${e}.body`;const a={x:0,y:0,width:t,height:$,name:e,body:n,addTo:(e,t)=>{void 0!==t?(e.addAt(a.body,t),e.addAt(a.skin,t)):(e.add(a.body),e.add(a.skin)),a.parent=e},setBody:(e,t,$)=>{a.body.width=e,a.body.height=t,a.body.color=$||a.body.color},addSkin:t=>{a.skin=f(t),a.skin.name=`${e}.skin`},update:()=>{a.body.update(),function(){const e=a.skin;e&&(e.x=a.body.x,e.y=a.body.y,e.update())}()},render:e=>{a.body.render(e),a.skin.render(e)},reset:()=>{a.skin&&a.skin.stop(),a.parent=null},detach:()=>{a.skin.detach(),a.body.detach(),a.parent=null,a.reserved=!1},play:e=>{a.skin&&a.skin.play(e)}};return Object.defineProperties(a,{x:{set:e=>{a.body.x=e},get:()=>a.body.x},y:{set:e=>{a.body.y=e},get:()=>a.body.y},width:{set:e=>{a.body.width=e},get:()=>a.body.width},height:{set:e=>{a.body.height=e},get:()=>a.body.height},active:{get:()=>a.skin.parent&&a.body.parent&&!a.skin.visible}}),a}var Ce,Ee,we,ve,be=[{name:"background",tileset:"tiles",data:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"hud",entities:[{name:"appleIcon",id:0,x:0,y:0,width:16,height:16},{name:"cornIcon",id:1,x:32,y:0,width:16,height:16}]}];function Fe(){let e=!0;const t=u(0,0,C,E),$=re(le,se,de,"Loading...");const i=Object.assign(t,{addTo:(e,t)=>{void 0!==t?e.addAt(i,t):e.add(i),$.x=C/2-15,$.y=E/2,e.add($),i.parent=e,B(3,i.kill)},kill:()=>{i.detach(),$.detach(),e=!1}});return Object.defineProperties(i,{active:{get:()=>e}}),i}function ke(){const e=be,t=y(),$=t.stage,i=t.destroy;function n(e,t,i){return(e=e||re(le,se,de,"x0")).x=t,e.y=i,$.add(e),e}t.destroy=()=>{Ce&&(Ce.detach(),Ee.detach(),we.detach(),ve.detach()),i()},e.forEach(((e,t)=>{if(t){const t=e.name;e.entities.forEach((e=>{var i,n;const a=e.name,r=null!=(i=e.width)?i:Ae.w,o=null!=(n=e.height)?n:Ae.h,A=e.x,d=e.y,s=(e.values,e.nodes,(e,t)=>(e?e.reset():e=t,e.x=A,e.y=d,e.addTo($),e.body.visible=!1,e));"hud"===t&&("appleIcon"===a&&(Ce=s(Ce,function(e,t,$,i){const n=Be(e,t,$,i);return n.addSkin({selected:{texture:me,loop:!0},idle:{texture:ge,loop:!1}}),n.skin.play("idle"),n.skin.onComplete=e=>{},n}(a,r,o))),"cornIcon"===a&&(Ee=s(Ee,function(e,t,$,i){const n=Be(e,t,$,i);return n.addSkin({selected:{texture:xe,loop:!0},idle:{texture:De,loop:!1}}),n.skin.play("idle"),n.skin.onComplete=e=>{},n}(a,r,o))))}))}})),we=n(we,14,8),ve=n(ve,45,8);let a=Fe();function r(){return a&&a.active&&!ot.loaded}return ot.loaded||a.addTo($),t.update=()=>{if(!r)return;ot.loaded=!0,a=null;const e=ot.fireBall.total,t=ot.laserBeam.total;Ce.update(),Ee.update(),we.text=`x${e}`,ve.text=`x${t}`,"fireball"===ot.currentPowerName&&(Ee.play("idle"),e>0?Ce.play("selected"):Ce.play("idle")),"laserBeam"===ot.currentPowerName&&(Ce.play("idle"),t>0?Ee.play("selected"):Ee.play("idle"))},t}var Ge=[{name:"background",tileset:"tiles",data:[-1,-1,36,37,-1,-1,48,49,32,50,51,41,-1,-1,-1,-1,-1,-1,54,55,41,56,57,-1,33,38,39,-1,41,39,40,31,39,40,41,32,-1,44,45,46,47,45,46,44,45,46,47,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,10,4,4,10,10,10,-1,3,1,15,16,5,6,7,7,7,7,7,7,7,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:96,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"apple_item",id:6,x:48,y:48,width:8,height:8},{name:"enemy_thor",id:7,x:72,y:48,values:{flipH:-1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:8,x:16,y:32,width:8,height:24,nodes:[{x:72,y:48}]},{name:"hideEnemy",id:9,x:8,y:48,width:8,height:8}]},{name:"texts",entities:[{name:"text",id:0,x:0,y:80,width:8,height:8,values:{text:"Press 'X' to Shoot",name:"shoot"}}]}];function He(){return he(Ge)}function Pe(){return ce(Ge[0].data)}var je=[{name:"background",tileset:"tiles",data:[-1,42,-1,44,-1,-1,-1,40,41,32,-1,-1,-1,-1,-1,-1,-1,43,-1,46,47,50,51,40,46,47,-1,30,-1,-1,-1,43,44,56,57,49,36,31,41,-1,38,-1,-1,-1,40,41,-1,32,-1,46,47,-1,-1,-1,-1,-1,46,47,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,15,1,4,18,19,-1,-1,1,1,1,5,7,7,7,8,24,25,6,7,7,7,7,7,12,13,13,14,12,13,14,14,13,13,12,12,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:32,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72},{name:"platform",id:3,x:48,y:56,width:56,height:8}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"hurt",id:4,x:24,y:64,width:32,height:8},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"apple_item",id:6,x:40,y:40,width:8,height:8}]},{name:"texts",entities:[{name:"text",id:0,x:0,y:80,width:8,height:8,values:{text:"Press 'z' to Jump",name:"jump"}}]}];function _e(){return he(je)}function Te(){return ce(je[0].data)}var Se=[{name:"background",tileset:"tiles",data:[36,-1,36,-1,-1,48,49,36,32,-1,-1,47,-1,-1,48,-1,-1,54,-1,40,41,50,51,54,-1,-1,30,55,-1,32,36,46,47,56,57,54,42,48,49,42,43,-1,42,54,40,41,31,43,-1,54,55,-1,-1,-1,-1,-1,46,47,43,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,-1,-1,0,10,18,19,-1,10,4,4,10,5,6,7,7,8,24,25,24,6,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:32,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72},{name:"platform",id:3,x:56,y:56,width:48,height:8}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"corn_item",id:7,x:40,y:40,width:8,height:8},{name:"apple_item",id:8,x:72,y:48,width:8,height:8},{name:"hurt",id:9,x:24,y:64,width:40,height:8}]},{name:"texts",entities:[{name:"text",id:0,x:8,y:80,width:8,height:8,values:{text:"Press 'C' to Switch",name:"switch"}}]}];function Xe(){return he(Se)}function Oe(){return ce(Se[0].data)}var Me=[{name:"background",tileset:"tiles",data:[38,39,37,-1,-1,-1,38,33,-1,40,-1,31,-1,-1,-1,-1,-1,-1,-1,45,37,50,51,40,32,-1,32,38,-1,45,-1,38,39,56,57,32,42,43,-1,44,45,-1,-1,44,45,-1,38,39,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,44,45,-1,-1,-1,-1,9,-1,-1,-1,-1,10,16,11,16,16,1,4,15,15,5,3,1,16,1,5,6,7,7,7,7,7,7,7,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:96,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72}]},{name:"entities",entities:[{name:"player",id:1,x:8,y:48},{name:"triggerEnemy",id:2,x:40,y:24,width:8,height:32,nodes:[{x:80,y:48},{x:16,y:48}]},{name:"enemy_mojo",id:3,x:80,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_ryan",id:4,x:16,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"door",id:5,x:88,y:24,width:8,height:32}]},{name:"reversers",entities:[{name:"reverser",id:0,x:0,y:48,height:8},{name:"reverser",id:1,x:88,y:48,height:8}]}];function Ie(){return he(Me)}function Ve(){return ce(Me[0].data)}var Le=[{name:"background",tileset:"tiles",data:[-1,39,40,41,-1,39,40,41,-1,-1,-1,30,-1,-1,46,-1,-1,-1,46,47,32,50,51,-1,-1,-1,-1,48,-1,40,32,37,-1,56,57,-1,36,37,30,54,45,46,47,49,48,49,48,32,-1,-1,-1,-1,-1,-1,54,55,54,55,54,55,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,15,1,4,18,19,-1,-1,1,1,1,5,7,7,7,8,24,25,24,6,7,7,7,7,12,13,13,14,12,13,14,14,13,13,12,12,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:32,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72},{name:"platform",id:3,x:56,y:56,width:40,height:8}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"triggerEnemy",id:2,x:40,y:24,width:8,height:32,nodes:[{x:80,y:48}]},{name:"enemy_mojo",id:3,x:80,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"hurt",id:4,x:24,y:64,width:40,height:8},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"corn_item",id:6,x:40,y:40,width:8,height:8}]},{name:"reversers",entities:[{name:"reverser",id:0,x:48,y:48,height:8},{name:"reverser",id:1,x:88,y:48,height:8}]}];function Ne(){return he(Le)}function Re(){return ce(Le[0].data)}var We=[{name:"background",tileset:"tiles",data:[38,-1,40,38,-1,-1,30,-1,40,48,40,40,-1,-1,-1,-1,-1,-1,39,40,50,51,31,43,-1,-1,39,32,43,-1,45,46,56,57,43,-1,32,37,45,46,-1,32,46,39,40,-1,-1,-1,42,-1,-1,-1,-1,-1,-1,45,46,-1,0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,7,0,16,1,4,16,16,10,10,15,2,20,20,7,7,7,7,7,7,7,7,7,7,21,20,12,13,13,13,13,13,13,12,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:96,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:104,y:0,width:8,height:72},{name:"platform",id:4,x:80,y:40,width:24,height:24}]},{name:"entities",entities:[{name:"triggerEnemy",id:2,x:40,y:32,width:8,height:24,nodes:[{x:56,y:48}]},{name:"enemy_mojo",id:3,x:56,y:48,values:{flipH:-1,state:"rise",triggered:!0}},{name:"door",id:5,x:96,y:16,width:8,height:32},{name:"enemy_thor",id:6,x:64,y:48,values:{flipH:-1,state:"run",triggered:!1}},{name:"enemy_ryan",id:7,x:88,y:32,values:{flipH:-1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:9,x:24,y:32,width:8,height:24,nodes:[{x:88,y:32}]},{name:"player",id:10,x:0,y:48},{name:"hideEnemy",id:11,x:8,y:48,width:8,height:8},{name:"apple_item",id:12,x:80,y:24,width:8,height:8}]}];function Ye(){return he(We)}function qe(){return ce(We[0].data)}var ze=[{name:"background",tileset:"tiles",data:[-1,-1,37,-1,-1,32,37,-1,-1,32,36,37,-1,-1,-1,-1,-1,-1,43,50,51,-1,42,43,-1,43,-1,-1,-1,36,37,56,57,38,-1,-1,-1,-1,42,43,-1,42,43,-1,-1,-1,38,32,2,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,7,10,10,9,-1,-1,-1,-1,-1,-1,10,20,20,15,16,15,5,-1,-1,3,4,16,16,21,20,7,7,7,8,24,25,6,7,7,7,13,14,13,13,13,13,13,12,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:48,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:104,y:0,width:8,height:72},{name:"platform",id:4,x:64,y:56,width:40,height:8},{name:"platform",id:5,x:-8,y:40,width:24,height:32}]},{name:"entities",entities:[{name:"triggerEnemy",id:2,x:40,y:32,width:8,height:24,nodes:[{x:16,y:48},{x:8,y:32}]},{name:"enemy_mojo",id:3,x:16,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"door",id:5,x:96,y:24,width:8,height:32},{name:"enemy_thor",id:6,x:8,y:32,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_ryan",id:7,x:88,y:48,values:{flipH:-1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:9,x:56,y:32,width:8,height:24,nodes:[{x:88,y:48}]},{name:"player",id:10,x:0,y:32},{name:"hurt",id:11,x:40,y:64,width:32,height:8},{name:"corn_item",id:12,x:48,y:40,width:8,height:8},{name:"apple_item",id:13,x:24,y:40,width:8,height:8}]}];function Je(){return he(ze)}function Ke(){return ce(ze[0].data)}var Ue=[{name:"background",tileset:"tiles",data:[38,-1,38,-1,-1,38,-1,-1,-1,38,-1,32,-1,-1,-1,-1,-1,-1,-1,31,50,51,36,37,-1,-1,-1,43,-1,38,-1,-1,56,57,42,32,37,32,37,-1,32,-1,-1,38,-1,38,-1,-1,-1,42,43,-1,36,37,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,4,-1,-1,-1,-1,-1,-1,-1,-1,6,7,7,7,16,4,-1,-1,-1,-1,-1,-1,-1,-1,26,-1,7,8,-1,-1,-1,6,8,-1,-1,-1,-1,-1,20,20,16,10,5,-1,19,-1,18,19,18,4,21,20,7,7,7,24,24,25,24,24,25,7,13,14,13,13,13,13,13,12,13,13,13,14]},{name:"collision",entities:[{name:"platform",id:0,x:-8,y:64,width:24,height:32},{name:"platform",id:1,x:-8,y:24,width:8,height:72},{name:"platform",id:2,x:8,y:80,width:32,height:16},{name:"platform",id:4,x:64,y:48,width:48,height:8},{name:"platform",id:5,x:40,y:64,width:16,height:8},{name:"platform",id:6,x:104,y:8,width:8,height:56}]},{name:"entities",entities:[{name:"door",id:5,x:96,y:24,width:8,height:32},{name:"player",id:10,x:0,y:56},{name:"hurt",id:11,x:32,y:88,width:64,height:8},{name:"triggerEnemy",id:12,x:40,y:48,width:8,height:16,nodes:[{x:8,y:56},{x:72,y:40}]},{name:"enemy_ryan",id:13,x:16,y:72,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_ryan",id:16,x:72,y:40,values:{flipH:-1,state:"rise",triggered:!0}},{name:"enemy_mojo",id:17,x:8,y:56,values:{flipH:1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:18,x:32,y:72,width:8,height:8,nodes:[{x:16,y:72}]},{name:"corn_item",id:19,x:40,y:24,width:8,height:8},{name:"apple_item",id:20,x:24,y:64,width:8,height:8}]},{name:"reversers",entities:[{name:"reverser",id:0,x:56,y:40,height:24},{name:"reverser",id:1,x:88,y:40,height:16}]}];function Qe(){return he(Ue)}function Ze(){return ce(Ue[0].data)}var et=[{name:"background",tileset:"tiles",data:[32,-1,-1,-1,38,39,32,39,-1,-1,40,31,-1,-1,-1,-1,-1,-1,-1,45,50,51,40,43,42,43,42,43,32,-1,-1,-1,56,57,46,40,-1,-1,-1,-1,-1,44,32,-1,42,43,31,32,7,7,7,8,-1,-1,-1,36,37,-1,46,43,22,20,21,22,-1,-1,-1,42,43,-1,-1,-1,21,20,12,26,7,8,-1,-1,-1,-1,-1,-1,20,20,-1,-1,21,22,-1,-1,-1,-1,-1,-1,21,20,-1,-1,14,21,7,8,-1,-1,-1,-1,21,22,-1,9,-1,-1,-1,-1,-1,-1,-1,-1,21,20,16,15,0,1,1,10,10,3,16,4,13,14,7,7,7,7,7,7,7,7,7,7]},{name:"collision",entities:[{name:"platform",id:0,x:-8,y:32,width:40,height:24},{name:"platform",id:1,x:-8,y:-32,width:8,height:72},{name:"platform",id:5,x:32,y:64,width:32,height:8},{name:"platform",id:6,x:104,y:-24,width:8,height:120},{name:"platform",id:7,x:0,y:48,width:16,height:48},{name:"platform",id:8,x:32,y:48,width:16,height:24},{name:"platform",id:10,x:0,y:88,width:112,height:8}]},{name:"entities",entities:[{name:"door",id:5,x:96,y:24,width:8,height:64},{name:"player",id:10,x:0,y:24},{name:"triggerEnemy",id:14,x:48,y:8,width:8,height:40,nodes:[{x:16,y:24}]},{name:"enemy_ryan",id:15,x:16,y:24,values:{flipH:1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:16,x:64,y:24,width:8,height:40,nodes:[{x:40,y:40},{x:32,y:40}]},{name:"enemy_thor",id:17,x:32,y:40,values:{flipH:1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:19,x:72,y:40,width:8,height:48,nodes:[{x:48,y:56},{x:80,y:80}]},{name:"enemy_mojo",id:20,x:48,y:56,values:{flipH:1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:21,x:40,y:72,width:8,height:16,nodes:[{x:64,y:80}]},{name:"enemy_thor",id:22,x:64,y:80,values:{flipH:1,state:"rise",triggered:!0}},{name:"corn_item",id:25,x:32,y:80,width:8,height:8},{name:"apple_item",id:27,x:16,y:64,width:8,height:8},{name:"enemy_ryan",id:28,x:80,y:80,values:{flipH:1,state:"rise",triggered:!0}}]},{name:"reversers",entities:[{name:"reverser",id:0,x:88,y:80,height:8},{name:"reverser",id:1,x:16,y:80,height:8}]}];function tt(){return he(et)}function $t(){return ce(et[0].data)}var it=[{name:"background",tileset:"tiles",data:[37,-1,-1,39,-1,38,39,32,49,37,32,33,-1,-1,-1,-1,-1,-1,45,54,32,43,44,45,-1,-1,55,-1,55,39,50,51,42,-1,48,49,-1,-1,45,43,-1,45,56,57,-1,42,31,55,-1,-1,-1,-1,-1,-1,-1,-1,42,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,10,10,1,15,5,3,10,1,15,15,6,7,7,7,7,7,7,7,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:112,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:104,y:0,width:8,height:72}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"triggerEnemy",id:2,x:40,y:24,width:8,height:32,nodes:[{x:80,y:48},{x:16,y:48}]},{name:"enemy_mojo",id:3,x:80,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_ryan",id:4,x:16,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_mojo",id:6,x:72,y:48,values:{flipH:-1,state:"run",triggered:!1}},{name:"enemy_ryan",id:7,x:48,y:48,values:{flipH:-1,state:"run",triggered:!1}},{name:"enemy_thor",id:8,x:32,y:48,values:{flipH:1,state:"rise",triggered:!1}},{name:"triggerEnemy",id:9,x:56,y:32,width:8,height:24,nodes:[{x:8,y:48}]},{name:"enemy_mojo",id:10,x:8,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"door",id:12,x:96,y:32,width:8,height:24},{name:"apple_item",id:13,x:48,y:40,width:8,height:8}]},{name:"reversers",entities:[{name:"reverser",id:0,x:0,y:48,height:8},{name:"reverser",id:1,x:88,y:48,height:8}]}];function nt(){return he(it)}function at(){return ce(it[0].data)}var rt=function(e){const t={};for(let $ in e)t[$]={code:e[$],down:!1};function $(e,$){Object.keys(t).forEach((i=>{const n=t[i];e===n.code&&($&&!n.down&&n.onDown&&n.onDown(),n.down=$)}))}return window.addEventListener("keydown",(function(e){$(e.key,!0)}),!1),window.addEventListener("keyup",(function(e){$(e.key,!1)}),!1),{is:e=>t[e]}}({left:"ArrowLeft",right:"ArrowRight",jump:"z",attack:"x",select:"c",debug:"q",fscreen:"e",restart:"r"}),ot=(()=>({sceneIndex:1,fireBall:{name:"fireball",total:0,max:50},laserBeam:{name:"laserBeam",total:0,max:50},currentPowerName:"fireball",resetPlayerProgress:()=>{ot.fireBall.total=0,ot.laserBeam.total=0,ot.currentPowerName="fireball"},setPlayerPower:(e,t)=>{"laserBeam"===e?(ot.laserBeam.total=t,ot.laserBeam.total>ot.laserBeam.max&&(ot.laserBeam.total=ot.laserBeam.max),"fireball"===ot.currentPowerName&&!ot.fireBall.total&&ot.laserBeam.total&&(ot.currentPowerName="laserBeam")):(ot.fireBall.total=t,ot.fireBall.total>ot.fireBall.max&&(ot.fireBall.total=ot.fireBall.max),"laserBeam"===ot.currentPowerName&&!ot.laserBeam.total&&ot.fireBall.total&&(ot.currentPowerName="fireball"))}}))(),At=function(e){const t=e&&e.fps?e.fps:60;let $=performance.now(),i=0,n=0,a=0,r=1e3/t;const o={dt:0,fdt:1/t,edt:0,time:Number.MIN_VALUE};let A={},d={};function s(){for(let e in A)A[e]()}return function e(){requestAnimationFrame(e);const t=performance.now();if(o.edt=t-$,$=t,o.dt=1*Math.min(o.edt,.05),o.time+=o.dt,o.edt>1e3)return;i+=o.edt;for(;i>=r;)s(),i-=r;!function(){for(let e in d)d[e]()}()}(),{add:function(e,t){let $="update"===e?n:a;const i="update"===e?A:d;return $+=1,i[$]||(i[$]=t),"update"===e?n=$:a=$,$},remove:function(e,t){const $="update"===t?A:d;$[e]&&delete $[e]},timer:o}}(),dt=(()=>{const e=[[null,null,null],[fe,ue,ke],[He,Pe,ke],[_e,Te,ke],[Xe,Oe,ke],[Ie,Ve,ke],[Ne,Re,ke],[Ye,qe,ke],[Je,Ke,ke],[Qe,Ze,ke],[tt,$t,ke],[nt,at,ke],[null,null,ye]],$=function(){const e=[];return{add:function($,i,n){const a=document.createElement("canvas");a.setAttribute("width",t(i)),a.setAttribute("height",t(n)),a.setAttribute("tabindex","-1"),a.setAttribute("id",$),a.setAttribute("opa",$);const r=a.getContext("2d");r.imageSmoothingEnabled=!1;const o={id:$,canvas:a,ctx:r};return e.push(o),o},remove:function(t){for(let $=0;$<e.length;$++)if(e[$].id===t)return void e.splice($,1)},get:function(t){const $=e.filter((e=>e.id===t));return $.length?$[0]:void 0}}}(),i=m(),n=m(),a=m(),r=function(){let e,t={};const $={init:()=>{$.initPlayer(),$.initEnemies()},initPlayer:()=>{e=T("hero",8,8)},initEnemies:()=>{i("mojo",{max:8,pool:[]}),i("ryan",{max:8,pool:[]}),i("thor",{max:8,pool:[]});for(let e in t){const $=t[e],i=$.max,n=$.pool;for(let t=0;t<i;t++){const $=F(`${e}_${t}`,8,8);n.push($)}}},getPlayer:()=>{let t;return e.active||(t=e),t},getEnemy:e=>{const $=t[e].pool;let i=null;for(let e=0;e<$.length;e++){const t=$[e];if(!t.active&&!t.reserved){i=t,t.reserved=!0;break}}return i},detach:()=>{e.detach(),e.reset();for(let e in t)t[e].pool.forEach((e=>{e.reserved=!1,e.detach(),e.reset()}))}};function i(e,$){t[e]=$}return $.init(),$}(),o=ne(),A=U(),d=W(),s=function(){let e=0;const t={},$={},i={init:()=>{n("player",{max:1,pool:[]}),n("enemy",{max:5,pool:[]});for(let e in t){const $=e,i=t[$],n=i.max,a=i.pool;for(let e=0;e<n;e++){const t=`${$}_${e}`;switch($){case"player":a.push(M(t,S));break;case"enemy":a.push(M(t,X))}}}},update:(e,t)=>{for(let i in $){const n=$[i];n.active?n.update(e,t):delete $[i]}},render:e=>{for(let t in $){const i=$[t];i.active&&i.render(e)}},get:i=>{const n=t[i].pool;let a;for(let t=0;t<n.length;t++){const i=n[t];if(!i.active){a=i,e+=1,$[e]=a;break}}return a},detach:()=>{for(let e in t)t[e].pool.forEach((e=>{e.kill()}))}};function n(e,$){t[e]=$}return i.init(),i}(),l={set:t=>{const $=e[t],r=$[0],o=$[1],A=$[2];n.clear(),i.clear(),a.clear(),r&&n.set(r),o&&i.set(o),A&&a.set(A),ot.sceneIndex=t},render:(e,t,$)=>{n.render(e.ctx),i.render(t.ctx),a.render($.ctx)},update:()=>{n.update(),a.update()},reload:()=>{switch(x(),ot.resetPlayerProgress(),ot.sceneIndex){case 2:case 5:case 7:ot.setPlayerPower("fireball",1);break;case 11:ot.setPlayerPower("fireball",2)}l.set(ot.sceneIndex)},next:()=>{x(),ot.sceneIndex+=1,l.set(ot.sceneIndex)}};return{scene:l,layers:$,actorPool:r,sfxPool:o,powerPool:A,dexpPool:s,itemsPool:d}})();function st(){const e=dt.scene,$=dt.layers,i=$.add("bg",C,E),n=$.add("fg",C,E),a=$.add("ui",C,E);document.body.appendChild(i.canvas),document.body.appendChild(n.canvas),document.body.appendChild(a.canvas),At.add("update",(()=>{!function(){for(let e in g)g[e]&&g[e]._update()}(),e.update()})),At.add("render",(()=>{e.render(n,i,a)})),e.reload(),function(e,$){const i=()=>{const i=window.innerWidth,n=window.innerHeight,a=i/n,r=$.width/$.height;let o=0,A=0;a<=r?(o=i,A=o/r):(A=n,o=A*r),e.forEach((e=>{e.style.width=t(o),e.style.height=t(A)}))};window.onresize=i,i()}([i.canvas,n.canvas,a.canvas],{width:C,height:E}),w.music()}window.onload=()=>{st(),window.focus(),document.body.addEventListener("click",(function(){window.focus()}),!1)}})()</script></body></html>