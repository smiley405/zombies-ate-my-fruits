(()=>{var U1=Math.pow;function W1(o){let r={};for(let e in o)r[e]={code:o[e],down:!1};window.addEventListener("keydown",t,!1),window.addEventListener("keyup",n,!1);function t(e){s(e.key,!0)}function n(e){s(e.key,!1)}function s(e,a){Object.keys(r).forEach($=>{let A=r[$];e===A.code&&(a&&!A.down&&A.onDown&&A.onDown(),A.down=a)})}return{is:e=>r[e]}}function n1(o){return o+"px"}function J1(){let o=[];function r(s,e,a){let i=document.createElement("canvas");i.setAttribute("width",n1(e)),i.setAttribute("height",n1(a)),i.setAttribute("tabindex","-1"),i.setAttribute("id",s),i.setAttribute("opa",s);let $=i.getContext("2d");$.imageSmoothingEnabled=!1;let A={id:s,canvas:i,ctx:$};return o.push(A),A}function t(s){for(let e=0;e<o.length;e++)if(o[e].id===s){o.splice(e,1);return}}function n(s){let e=o.filter(a=>a.id===s);return e.length?e[0]:void 0}return{add:r,remove:t,get:n}}var y1={};function l1(o){if(!y1[o]){let r=document.createElement("canvas"),t=r.getContext("2d");y1[o]={canvas:r,ctx:t}}return y1[o]}function B1(o){y1[o]&&delete y1[o]}var vt=0;function z(){return vt+=1}function p1(o,r){let t=o.x+o.width/2-(r.x+r.width/2),n=o.y+o.height/2-(r.y+r.height/2),s=(o.width+r.width)/2,e=(o.height+r.height)/2,a={side:"",overlap:null};return Math.abs(t)<s&&Math.abs(n)<e&&(a.overlap={x:s-Math.abs(t),y:e-Math.abs(n)},a.overlap.x>=a.overlap.y?a.side=n>0?"top":"bottom":a.side=t>0?"left":"right"),a.hit=!!a.side,a}function j(o,r){var t=o.x<r.x+r.width&&o.x+o.width>r.x,n=o.y<r.y+r.height&&o.y+o.height>r.y;return t&&n}function d1(o,r){return o.findIndex(t=>t.uid===r.uid)}function K1(o,r){for(var t=r.length;t>=0;t--)if(r[t]===o)return r.splice(t,1),r;return r}function q1(o,r,t,n=!0,s=!0){var e=r.x-o.x,a=r.y-o.y,i=Math.sqrt(e*e+a*a);i>=t&&(n&&(o.x+=e/i*t),s&&(o.y+=a/i*t))}function Q(o,r){let t=o.x+o.width*o.pivotX,n=o.y+o.height*o.pivotY;r.setTransform(o.scaleX,0,0,o.scaleY,t,n)}function U(){let o=1,r={x:0,y:0,alpha:1,width:0,height:0,scaleX:1,scaleY:1,pivotX:0,pivotY:0,rotation:0,visible:!0,uid:z(),gx:0,gy:0,detach:()=>{r.parent&&r.parent.remove(r)},render:()=>{},update:()=>{}};return Object.defineProperties(r,{alpha:{get:()=>r.parent?r.parent.alpha*o:o,set:t=>{o=t}},gx:{get:()=>r.parent?r.x+r.parent.gx:r.x},gy:{get:()=>r.parent?r.y+r.parent.gy:r.y}}),r}function x1(o,r,t,n=0,s=0){let e=r.frames,a=r.w,i=r.palette,$=e.split("|")[t];$=$.replace(/(\D)(\d+)/g,(A,l,f)=>l.repeat(f)),[...$].forEach((A,l)=>{let f=i[A];if(f===void 0)return;let c=l%a,d=Math.floor(l/a);o.fillStyle=f,o.fillRect(c+n,d+s,1,1)})}function Z(o,r=!0,t=!0){let n=o.frames,s=o.fps,e=n.split("|").length,a=U(),i=a.detach,$=0,A=0,l=r,f=Array.from({length:e},(h,b)=>l1(a.uid+"_"+b)),c=Object.assign(a,{texture:o,loop:t,render:h=>{if(!c.visible||!c.texture)return;let b=f[$],x=b.canvas,F=b.ctx;if(b.cached){Q(c,h),h.drawImage(x,0,0);return}b.cached=!0,x.width=h.canvas.width,x.height=h.canvas.height,x1(F,c.texture,$),Q(c,F)},update:()=>{if(l){if(!c.loop&&$==e-1){c.stop(),c.onComplete&&c.onComplete(c.name);return}for(A+=m1.timer.fdt;A*s>=1;)$=++$%e,A-=1/s}},start:(h=0)=>{c.playing||(d(),C(h),l=!0)},stop:h=>{C(h),l=!1},destroy:()=>{d()},detach:()=>{i(),d()}});function d(){c.stop(),l=!1,$=0,A=0}function C(h){$=h!==void 0?h:$}return Object.defineProperties(c,{playing:{get:()=>l},currentFrame:{get:()=>$},totalFrames:{get:()=>e}}),o&&(c.width=o.w,c.height=o.h),c}function z1(){let o=0,r=0,t=[],n=Object.assign(U(),{children:t,add:e=>{e.parent&&e.detach(),e.parent=n,n.children.push(e),s()},addAt:(e,a)=>{e.parent&&e.detach(),e.parent=n,t.splice(a,0,e),s()},swap:(e,a)=>{if(e.uid===a.uid)return;let i=d1(t,e),$=d1(t,a);i<0||$<0||(t[i]=a,t[$]=e)},remove:e=>{e.parent&&e.parent.uid===n.uid&&(K1(e,n.children),e.parent=null,s())},removeAll:()=>{t.forEach(e=>{n.remove(e)}),t.length=0,s()},render:e=>{t.forEach(a=>{e.globalAlpha=a.alpha,Q(n,e),a.render&&a.render(e),n.onEachRender&&n.onEachRender(a)})},update:()=>{t.forEach(e=>{e.update&&e.update()})},destroy:()=>{t.forEach(e=>{e.destroy&&e.destroy()}),n.removeAll()}});function s(){t.length>0&&(o=0,r=0,t.forEach(e=>{e.x+e.width>o&&(o=e.x+e.width),e.y+e.height>r&&(r=e.y+e.height)}),n.width=o,n.height=r)}return n}function C1(o){var $;let r={},t;for(let A in o){let l=o[A],f=Z(l.texture,!1);f.loop=($=l.loop)!=null?$:f.loop,f.name=A,r[A]=f,t=f}let n=U(),s=Object.assign(n,{render:A=>{!s.visible||!t||t.render(A)},update:()=>{t.update(),e()},play:(A,l)=>{a(A)||(t&&(t.stop(),t.onComplete=null),t=r[A],t.onComplete=f=>{s.onComplete&&s.onComplete(f)},t.start(l))},stop:A=>{t&&t.stop(A)}});function e(){for(let A in r){let l=r[A];i(s,l)}}function a(A){return t&&t.playing&&A===t.name}function i(A,l){["x","y","alpha","width","height","scaleX","scaleY","pivotX","pivotY","rotation","visible"].forEach(c=>{l[c]=A[c]})}return s}function G(o,r,t,n,s="#000"){let e=U(),a=Object.assign(e,{color:s,x:o,y:r,width:t,height:n,render:i=>{a.visible&&(i.fillStyle=a.color,i.fillRect(a.x,a.y,a.width,a.height),Q(a,i))}});return a}function Q1(){return Object.assign(z1(),{isStage:!0,name:"stage"})}function f1(){let o=Q1();return{uid:z(),stage:o,render:t=>{o.render(t)},update:()=>{o.update()},destroy:()=>{o.destroy()}}}function v1(){let o;return{set:t=>{o&&o.destroy(),o=t()},render:t=>{let n=t.canvas;o?(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n.width,n.height),o.render(t)):t.clearRect(0,0,n.width,n.height)},update:()=>{o&&o.update()},clear:()=>{o&&o.destroy(),o=null}}}function Z1(o){let r=o&&o.fps?o.fps:60,t=performance.now(),n=0,s=0,e=0,a=1e3/r,i=.05,$=1,A={dt:0,fdt:1/r,edt:0,time:Number.MIN_VALUE},l={},f={};c();function c(){requestAnimationFrame(c);let x=performance.now();if(A.edt=x-t,t=x,A.dt=Math.min(A.edt,i)*$,A.time+=A.dt,!(A.edt>1e3)){for(n+=A.edt;n>=a;)d(),n-=a;C()}}function d(){for(let x in l)l[x]()}function C(){for(let x in f)f[x]()}function h(x,F){let y=x==="update"?s:e,B=x==="update"?l:f;return y+=1,B[y]||(B[y]=F),x==="update"?s=y:e=y,y}function b(x,F){let y=F==="update"?l:f;y[x]&&delete y[x]}return{add:h,remove:b,timer:A}}var i1={};function L1(){for(let o in i1)i1[o]&&i1[o].kill()}function ee(){for(let o in i1)i1[o]&&i1[o]._update()}function te(o=0){let r=z(),t=m1.timer,n=!0,s=t.time,e=t.time,a={dt:0,uid:r,_update:()=>{e=t.time},kill:()=>{n=!1,delete i1[r]},reset:()=>{s=t.time}};return Object.defineProperties(a,{dt:{get:()=>t.time-s-o},running:{get:()=>n}}),i1[r]=a,a}function oe(o,r){let t=te(o),n=t._update;return t._update=()=>{t.running&&t.dt>o&&(r&&r(),t.reset()),n()},t}function J(o,r){let t=te(o),n=t._update,s=t.kill;return t.kill=()=>{s(),r&&r()},t._update=()=>{t.running&&t.dt>o&&t.kill(),n()},t}var R=(()=>{let o=!1,r=new AudioContext,t=r.createGain(),n=[],s=[],e=!0;window.addEventListener("focus",()=>{e=!0,S(!1)}),window.addEventListener("blur",()=>{e=!1,S()});function a(p,u){return(u-p)/u}function i(p,u){t.gain.value=u||1,t.connect(r.destination);let D=r.createBuffer(1,96e3,48e3),O=D.getChannelData(0);for(var k=96e3;k--;)O[k]=p(k);let T=r.createBufferSource();T.buffer=D,T.connect(t),T.start()}function $(p){var u=2e4;if(p>u)return null;var D=a(p,u);return Math.pow(p*30,.3)&33?D:-D}function A(p){var u=2e4;if(p>u)return null;var D=a(p,u);return Math.pow(p*5e5,.3)&33?D:-D}function l(p){var u=2e4;if(p>u)return null;var D=a(p,u);return p=p*.7,Math.pow(p*50,.8)&133?D:-D}function f(p){var u=13e3,D=u/3;if(p>u)return null;var O=Math.pow(a(p,u),3.1);return Math.pow(p,1.08)&(p<D?98:99)?O:-O}function c(p){var u=25e3;return p>u?null:((p^p>>3^p*p*7.3^p<<4)&65535)/65536*a(p,u)}function d(p){p=p*1.4;var u=2e4;return p>u?null:(Math.pow(p,1.055)&130?1:-1)*Math.pow(a(p,u),2)}function C(p){var u=[0,4,7,12,void 0,7,12],D=35e3;if(p>D)return null;var O=u.length*p/D|0,k=u[O];if(k===void 0)return 0;var T=Math.pow(2,k/12)*.8,V=a(p*u.length%D,D);return p*T&64?V:-V}function h(p){return .8*(Math.random()*2-1)*Math.exp(-p/800)}function b(p,u,D,O,k,T,V,E,g){let v=new AudioContext,_=v.createGain();p.forEach(function(Y){var M=v.createOscillator();M&&(M.connect(_),_.connect(v.destination),M.start(Y[0]*T),M.frequency.setValueAtTime(u*U1(1.06,13-Y[1]),Y[0]*T),M.type=E,_.gain.setValueAtTime(V,Y[0]*T),_.gain.setTargetAtTime(1e-5,Y[0]*T+O,k),M.stop(Y[0]*T+D))}),n.push(v)}function x(p){var u=null;switch(p){case"fxPistol":u=A;break;case"fxTele":u=l;break;case"fxSpawnD":u=f;break;case"fxSuperT":u=c;break;case"fxPunch":u=$;break;case"fxPick":u=d;break;case"fxWin":u=C;break;case"fxLanded":u=h;break}if(u){var D=p==="fxPunch"?.2:.5;i(u,D)}}function F(){o||(o=!0,y())}function y(){let p=setTimeout(()=>w(3700),1e3);s.push(p)}function B(){n.forEach(p=>p.close()),n.length=0,s.forEach(p=>clearTimeout(p)),s.length=0,o=!1}function S(p=!0){n.forEach(u=>p?u.suspend():u.resume())}function w(p){B(),b([[7,11],[2,23],[5,13],[3,11],[4,11],[6,11],[8,23],[7,23],[10,23],[9,13],[11,11],[12,11],[13,13],[15,11],[14,11],[17,13],[15,23],[16,23],[18,23],[21,11],[22,11],[17,20],[19,23],[23,13],[23,20],[24,11],[25,11],[26,13],[27,11],[28,11],[25,23],[27,23],[29,20],[20,13],[0,23],[1,20],[3,23]],100,.18,.1,.005,.2,.03,"sawtooth"),e||S();let u=setTimeout(()=>w(p),p);s.push(u)}return{play:x,music:F,killMusic:B}})();var re={w:8,h:8,frames:"$27A1B2$5C2B1$4D1C3$4D1E2D2$2D1E4D1$1|$35A1B2$5C2B1$4D1C3$4D1E2D2$1|$51A1B2$5C2B1$2",palette:{A:"#333c57",B:"#b13e53",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8},ne={w:8,h:8,frames:"$51A1B2$5C2B1$2|$35A1B2$5C2B1$4D1C3$4D1E2D2$1|$27A1B2$5C2B1$4D1C3$4D1E2D2$2D1E4D1$1",palette:{A:"#333c57",B:"#b13e53",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8},ie={w:8,h:8,frames:"$3A1B2$5C2B1$4D1C3$4D1E2D2$2D1E4D1$2D1E4D1$2D1E1$2E1D1$2E1$4E1$1|$4A1B2$5C2B1$3D2C3$2D1E4D2$1D1E4$1D1$1D2E3$1D1$2E1$2E1$4E1$2E1$2|$1A1B2$5C2B1$5C3$5D1E2D3$2D1E4$1D2$1E4$4E2$1E1$5F1E1$3|$2A1B2$5C2B1$5C3$4D2E2D3$1D1E4$3D1E4$3D1E1$2E1$4E1$1E1$3|$2A1B2$5C2B1$5C3$4D2E2D3$1D1E4$3D1E4$3D1E1$2E1$4E1$1E1$3",palette:{A:"#333c57",B:"#b13e53",C:"#a7f070",D:"#ffcd75",E:"#257179",F:"#29366f"},fps:8};var ae={w:8,h:8,frames:"$35A1B2$4A1C1B2$4A1C1$1C1$4D1C1D1C1$2|$43A1B2$4A1C1B2$4A1C1$1C1$2|$51A1B2$4A1C1B2$2",palette:{A:"#38b764",B:"#a7f070",C:"#ffcd75",D:"#257179"},fps:8},$e={w:8,h:8,frames:"$51A1B2$4A1C1B2$2|$43A1B2$4A1C1B2$4A1C1$1C1$2|$35A1B2$4A1C1B2$4A1C1$1C1$4D1C1D1C1$2",palette:{A:"#38b764",B:"#a7f070",C:"#ffcd75",D:"#257179"},fps:8},se={w:8,h:8,frames:"$12A2$5B1A2$5C1B1C2$4C1B1$1C1$4C1D1$5D1$2D1$4D1$2D1$2|$19B1A2$4B1C1A2$4B1C1$1C1$4D1C1D1C1$3D1$2D1C1$2D1$3D1$3|$12D2$5B1C1D1$5B2C2$4B2$1C1$4D2$5D2$1D1$4D1$2D1$2|$20A2$5C1A2$5C1B1C1$5C1D1C1$4D3C1$3D1$2D1$3",palette:{A:"#a7f070",B:"#38b764",C:"#ffcd75",D:"#257179"},fps:8};var Ae={w:8,h:8,frames:"$27A2$5B1C1A1$5D1B2D3$2D1B2$5D1E2$3|$35A2$5B1C1A1$5D1B2D2$3D1B2$3|$51A2$5B1C1A1$3",palette:{A:"#b13e53",B:"#38b764",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8},le={w:8,h:8,frames:"$51A2$5B1C1A1$3|$35A2$5B1C1A1$5D1B2D2$3D1B2$3|$27A2$5B1C1A1$5D1B2D3$2D1B2$5D1E2$3",palette:{A:"#b13e53",B:"#38b764",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8},de={w:8,h:8,frames:"$11A2$5B1C1A1$5D1B2D3$2D1B2$5D1E2$5E1$1E1$5D1$1D1$3|$3A2$5B1C1A1D1$4D1B2$1D2$1D1B3$4D1B3$5E4$3D1E1$2D1$10|$11A2$6C1A1$2D1$2D1B2D2$3D1B2$5D1B2$5E3$7D1$3|$3A2$5B1C1A1$4D2B2D3$1D1B3$5B3$5E3$6D1$12",palette:{A:"#b13e53",B:"#38b764",C:"#a7f070",D:"#ffcd75",E:"#257179"},fps:8};function b1(o,r=0,t=0,n="#fff"){let s=G(0,0,r,t,n);s.name=`${o}.body`;let e={uid:z(),name:o,width:r,height:t,health:1,alpha:1,x:0,y:0,vx:0,vy:0,speedX:.8,jForce:2.8,flipH:1,dGravity:.5,jGravity:.2,gravity:.5,body:s,addTo:($,A)=>{A!==void 0?($.addAt(e.body,A),$.addAt(e.skin,A)):($.add(e.body),$.add(e.skin)),e.parent=$},setVisible:($,A)=>{e.body.visible=$,e.skin.visible=A},setBody:($,A,l)=>{e.body.width=$,e.body.height=A,e.body.color=l||e.body.color},update:()=>{e.body.update(),a(),i()},render:$=>{e.body.render($),e.skin.render($)},addSkin:$=>{e.skin=C1($),e.skin.name=`${o}.skin`},vsPlatforms:($,A)=>{$.forEach(l=>{var f=e.body,c=l,d=p1(f,c);d.hit&&(d.side==="bottom"?(e.grounded=!0,e.gravity=e.dGravity,e.y=e.y-d.overlap.y,e.resetVy()):d.side==="top"?(e.y=e.y+d.overlap.y,e.resetVy()):d.side==="right"?(e.x=e.x-d.overlap.x,e.vx-=e.speedX):d.side==="left"&&(e.x=e.x+d.overlap.x,e.vx+=e.speedX))})},vsHurts:($,A)=>{for(let l=0;l<$.length;l++){let f=$[l],c=e.body;if(j(c,f)){e.receiveDamage(1,f);break}}},addSfx:$=>{let A=H.sfxPool.get($);A&&(e.parent.add(A),A.x=e.x+e.width/2-A.width/2,A.y=e.y+e.height-A.height,A.start(0))},explode:$=>{let A=H.dexpPool.get($);A&&A.addTo(e.x,e.y,e.parent)},receiveDamage:($,A)=>{e.dead||(e.health-=$,e.health<=0&&(e.health=0,e.kill()))},doFlipH:()=>{e.flipH*=-1},kill:()=>{e.dead=!0},reset:()=>{e.skin&&e.skin.stop(),e.parent=null,e.flipH=1,e.health=1,e.dead=!1,e.moving=!1,e.grounded=!1,e.jumping=!1,e.falling=!1,e.attacking=!1,e.resetVx(),e.resetVy(),e.resetGravity()},detach:()=>{e.skin.stop(),e.skin.detach(),e.body.detach(),e.parent=null,e.reserved=!1},resetVx:()=>{e.vx=0},resetVy:()=>{e.vy=0},voidGravity:()=>{e.gravity=0},resetGravity:()=>{e.gravity=e.dGravity},isFlipH:()=>e.flipH===-1,onLanded:()=>{}};function a(){let $=e.skin;$&&($.scaleX=e.flipH,e.isFlipH()?$.x=e.body.x+e.body.width:$.x=e.body.x,$.y=e.body.y,$.update())}function i(){e.vy+=e.gravity,e.y+=e.vy,e.x+=e.vx,!e.grounded&&e.vy>0&&(e.falling=!0),e.grounded&&e.falling&&(e.onLanded(),e.falling=!1)}return Object.defineProperties(e,{x:{set:$=>{e.body.x=$},get:()=>e.body.x},y:{set:$=>{e.body.y=$},get:()=>e.body.y},width:{set:$=>{e.body.width=$},get:()=>e.body.width},height:{set:$=>{e.body.height=$},get:()=>e.body.height},active:{get:()=>e.skin.parent&&e.body.parent&&!e.dead&&e.skin.visible}}),e}var bt={mojo:{dig:re,rise:ne,run:ie},ryan:{dig:ae,rise:$e,run:se},thor:{dig:Ae,rise:le,run:de}};function fe(o,r,t,n){let s,e,a=b1(o,r,t,n),i=a.detach,$=a.update,A=a.kill,l=Object.assign(a,{type:o.split("_")[0],update:()=>{$(),c(),l.watchFlip()},changeState:x=>{switch(s=x,e||(l.reserved=!1),x){case"dig":C();break;case"rise":d();break}},watchFlip:()=>{l.isFlipH()?l.skin.scaleX>0&&(l.skin.scaleX*=-1):l.skin.scaleX<0&&(l.skin.scaleX*=-1)},vsReversers:(x,F)=>{x.forEach(y=>{let B=l.body,w=p1(B,y);w.hit&&(w.side==="right"?(l.x=l.x-w.overlap.x,l.vx-=l.speedX):w.side==="left"&&(l.x=l.x+w.overlap.x,l.vx+=l.speedX),l.doFlipH())})},vsHiders:(x,F)=>{if(s!=="dig")for(let y=0;y<x.length;y++){let B=x[y],S=l.body;if(j(S,B)){l.changeState("dig");break}}},vsPlayer:(x,F)=>{let y=l.body,B=x.body;j(y,B)&&x.receiveDamage(1,l)},waitForTrigger:x=>{e=x,l.setVisible(!1,!1)},onTrigger:(x,F,y=!0)=>{l.flipH=F,l.changeState(e),l.skin.visible=!0,e=null,y&&R.play("fxSuperT")},disappear:()=>{l.dead=!0,l.detach()},kill:()=>{A(),l.setVisible(!1,!1),l.explode("enemy"),J(1,l.detach)},detach:()=>{l.parent&&(i(),e=null)},isToBeTriggered:()=>!l.dead&&e&&l.parent}),f=bt[l.type];l.speedX=b(),l.addSkin({dig:{texture:f.dig,loop:!1},rise:{texture:f.rise,loop:!1},run:{texture:f.run,loop:!0}}),l.skin.stop(),l.skin.onComplete=x=>{x==="rise"&&l.changeState("run"),x==="dig"&&l.disappear()};function c(){s==="run"&&h()}function d(){l.moving=!1,l.resetVx(),l.skin.play("rise"),l.addSfx("emergeDusts")}function C(){l.moving=!1,l.resetVx(),l.skin.play("dig"),l.addSfx("emergeDusts")}function h(){l.grounded&&(l.moving=!0,l.vx=l.flipH*l.speedX),l.skin.play("run")}function b(){switch(l.type){case"mojo":return .2;case"ryan":return .3;case"thor":return .4;default:return .5}}return l}var ce={w:8,h:8,frames:"$21A2$6A2$3B3A1$4B3A1$4B3A1$3A5$2|$26B3$5B3A2$3B3A2$3A4$3A5$2",palette:{A:"#ffcd75",B:"#b13e53"},fps:5},pe={w:8,h:8,frames:"$27A3$5A3B2$2A4B2$2A1B4$2B5$2|$22B2$4A2B2$2A4B1$3A4B1$3A4B1$1B7$1|$26A4$4A3B2$3A3B2$3A3B1$3B5$2|$21B2$6B2$3A3B1$4A3B1$4A3B1$4B4$2",palette:{A:"#b13e53",B:"#ffcd75"},fps:8},me={w:8,h:8,frames:"$13A2$6A2$6A2$3B3A1$4B3A1$4B3A1$4B3$3",palette:{A:"#ffcd75",B:"#b13e53"},fps:1};var ue={w:8,h:8,frames:"$11A2$6A2$7B1A1$4B3A1$4B3A1$4B3A1$7A2$1",palette:{A:"#ffcd75",B:"#b13e53"},fps:1},he={w:8,h:8,frames:"$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2",palette:{A:"#ffcd75",B:"#b13e53",C:"#ef7d57"},fps:8},ye={w:8,h:8,frames:"$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2|$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2|$20A2$3B3A1C1$3B3A2$3B3A1$5A3$5A3$3|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2|$13A3$5A1C2$2B3A1$4B3A1$4B3A1C2$2B3A3$1A5$2",palette:{A:"#ffcd75",B:"#b13e53",C:"#ef7d57"},fps:12};function xe(o,r,t,n){let s=!1,e,a=[],i=.8,$=.3,A=b1(o,r,t,n),l=A.addTo,f=A.update,c=A.kill,d=Object.assign(A,{powers:a,addTo:(E,g)=>{l(E,g),d.setVisible(!1,!0),p()},update:()=>{f(),h()},syncPowers:p,changeState:E=>{switch(e=E,E){case"idle":b();break;case"run":x();break;case"jump":F();break;case"hurt":y();break;case"attack":B();break}},vsEnemyTriggers:(E,g,v)=>{E.forEach((_,Y)=>{let M=d.body;if(j(M,_)){let I=_.nodes;g.forEach(N=>{if(N.isToBeTriggered())for(let X=0;X<I.length;X++){let h1=I[X];if(h1.x===N.x&&h1.y===N.y){let k1=N.x>d.x?-1:1;N.onTrigger(_,k1),_.register(Y);break}}})}if(_.isJobDone()){let I=d1(E,_);E.splice(I,1),_.kill()}})},vsDoors:(E,g)=>{for(let v=0;v<E.length;v++){let _=E[v],Y=d.body;if(j(Y,_)){H.scene.next();break}}},kill:()=>{c(),d.setVisible(!1,!1),R.play("fxPunch"),d.explode("player"),J(1,C)}});function C(){d.detach(),H.scene.reload()}w(),d.addSkin({idle:{texture:ce},run:{texture:pe},jump:{texture:me,loop:!1},hurt:{texture:ue,loop:!1},shootLaser:{texture:ye,loop:!1},throw:{texture:he,loop:!1}}),d.skin.play("idle"),d.skin.onComplete=E=>{(E==="throw"||E==="shootLaser")&&(d.attacking=!1,d.gravity=d.jumping?d.jGravity:d.dGravity)},d.onLanded=()=>{d.addSfx("impactDusts"),R.play("fxLanded")},e1.is("jump").onDown=T,e1.is("attack").onDown=V,e1.is("select").onDown=O;function h(){e1.is("right").down?d.attacking||(d.flipH=1,d.changeState("run")):e1.is("left").down?d.attacking||(d.flipH=-1,d.changeState("run")):d.grounded&&!d.attacking&&d.changeState("idle"),d.grounded&&(d.jumping=!1,s=!1),d.attacking&&(d.resetVx(),d.resetVy(),d.voidGravity())}function b(){d.moving=!1,d.resetVx(),d.skin.play("idle")}function x(){d.jumping||(d.speedX=$),d.moving=!0,d.vx=d.flipH*d.speedX,d.grounded&&d.skin.play("run")}function F(){d.speedX=i,d.jumping=!0,d.grounded=!1,d.gravity=d.jGravity,d.vy-=d.jForce,d.skin.play("jump"),R.play("fxSpawnD")}function y(){d.skin.play("hurt")}function B(){let E=d.currentPower.name,g="throw";d.attacking=!0,d.jumping&&!s&&(s=!0),S(E),E==="laserBeam"&&(g="shootLaser"),d.skin.play(g)}function S(E){switch(E){case"fireball":{let g=H.powerPool.get(E);if(!g)return;g.addTo(d.parent),g.x=d.x+r/2-g.width/2,g.y=d.y,g.flipH=d.flipH,g.play(),R.play("fxPunch"),D();break}case"laserBeam":{let g=H.powerPool.get(E);if(!g)return;g.addTo(d.parent),g.flipH=d.flipH,g.scaleX=d.flipH;let v=2;g.x=d.isFlipH()?d.x-g.width+v:d.x+d.width-v,g.y=d.y,g.play(),R.play("fxPistol"),D();break}}}function w(){a.length=0,a.push(m.fireBall),a.push(m.laserBeam),d.currentPower=a[0]}function p(){a.length&&(a[0]=m.fireBall,a[1]=m.laserBeam,d.currentPower.total||O())}function u(E){let g=a.filter(_=>_.name===E)[0],v=g.total;v+=1,v>g.max&&(v=g.max),g.total=v}function D(){let E=d.currentPower.total;if(E-=1,E<0&&(E=0),d.currentPower.total=E,!d.currentPower.total){for(let g=0;g<a.length;g++)if(a[g].total){k(g);break}}}function O(){if(d.dead)return;let E=a.indexOf(d.currentPower);E+=1;let g=()=>{E>=a.length&&(E=0)};a.forEach((v,_)=>{_===E&&v.total===0&&(E+=1,g())}),g(),k(E)}function k(E=0){d.powers[E].total&&(d.currentPower=d.powers[E],m.currentPowerName=d.currentPower.name)}function T(){d.jumping||d.grounded&&!d.attacking&&d.changeState("jump")}function V(){d.dead||d.attacking||s||d.currentPower.total===0||d.changeState("attack")}return d}function ge(){let o,r={},t={init:()=>{t.initPlayer(),t.initEnemies()},initPlayer:()=>{o=xe("hero",8,8)},initEnemies:()=>{n("mojo",{max:8,pool:[]}),n("ryan",{max:8,pool:[]}),n("thor",{max:8,pool:[]});for(let s in r){let a=r[s],i=a.max,$=a.pool;for(let A=0;A<i;A++){let l=`${s}_${A}`,f=fe(l,8,8);$.push(f)}}},getPlayer:()=>{let s;return o.active||(s=o),s},getEnemy:s=>{let e=r[s].pool,a=null;for(let i=0;i<e.length;i++){let $=e[i];if(!$.active&&!$.reserved){a=$,$.reserved=!0;break}}return a},detach:()=>{o.detach(),o.reset();for(let s in r)r[s].pool.forEach($=>{$.reserved=!1,$.detach(),$.reset()})}};t.init();function n(s,e){r[s]=e}return t}var Ee={w:1,h:1,frames:"A|B|C",palette:{A:"#5d275d",B:"#b13e53",C:"#ef7d57"},fps:1},De={w:1,h:1,frames:"A|B|C",palette:{A:"#29366f",B:"#257179",C:"#38b764"},fps:1};function Be(o,r){return Math.floor(Math.random()*(r-o+1))+o}function Ce(o,r,t,n,s){return n+(s-n)*((o-r)/(t-r))}function wt(o,r,t){let n=Z(o,!1,!1);n.name="death-explosion";let s=Be(0,n.totalFrames-1);n.start(s);let e=G(0,0,o.w,o.h,"ff0000");e.name=n.name+".body",e.visible=!1;let a=1,i={uid:z(),speedX:.1,dg:.1,g:.1,x:r,y:t,vx:0,vy:0,alpha:a,addTo:(f,c)=>{c!==void 0?(f.addAt(e,c),f.addAt(n,c)):(f.add(e),f.add(n)),i.parent=f},update:(f,c)=>{n.x=e.x,n.y=e.y,e.update(),n.update(),i.vy+=i.g,i.y+=i.vy,i.grounded?$():i.x+=i.vx,f&&f.length&&l(f),c&&c.length&&l(c)},render:f=>{e.render(f),n.render(f)},kill:()=>{n.detach(),e.detach(),i.parent=null,i.reserved=!1,$(),A()}};e.x=i.x,e.y=i.y,i.vx=(Math.random()*2-1)*i.speedX,i.vy=Math.random()*-(i.vy-2)*Math.cos(Math.abs(i.vx)/i.speedX)-2;function $(){i.vx=0}function A(){i.vy=0}function l(f){f.forEach(c=>{var d=e,C=c,h=p1(d,C);h.hit&&(h.side==="bottom"?(i.grounded=!0,i.g=i.dg,i.y=i.y-h.overlap.y,A()):h.side==="top"?(i.y=i.y+h.overlap.y,A()):h.side==="right"?(i.x=i.x-h.overlap.x,i.vx-=i.speedX):h.side==="left"&&(i.x=i.x+h.overlap.x,i.vx+=i.speedX))})}return Object.defineProperties(i,{x:{set:f=>{e.x=f},get:()=>e.x},y:{set:f=>{e.y=f},get:()=>e.y},alpha:{set:f=>{n.alpha=f,a=f},get:()=>a},active:{get:()=>!!e.parent}}),i}function P1(o,r,t=3){let s=[],e,a={name:o,kill:()=>{s.forEach(i=>{i.kill()}),s.length=0,e=null},update:(i,$)=>{s.forEach(A=>{A.update(i,$),e&&e.running&&(A.alpha=Ce(e.dt,0,t,1,0))})},render:i=>{s.forEach($=>{$.render(i)})},addTo:(i=0,$=0,A,l)=>{for(let f=0;f<8;f++){let c=wt(r,i,$);c.addTo(A,l),s.push(c)}e=J(t,a.kill)}};return Object.defineProperties(a,{active:{get:()=>!!s.length}}),a}var Ft=1,Tt=5;function ve(){let o=0,r={},t={},n={init:()=>{s("player",{max:Ft,pool:[]}),s("enemy",{max:Tt,pool:[]});for(let e in r){let a=e,i=r[a],$=i.max,A=i.pool;for(let l=0;l<$;l++){let f=`${a}_${l}`;switch(a){case"player":A.push(P1(f,Ee));break;case"enemy":A.push(P1(f,De));break}}}},update:(e,a)=>{for(let i in t){let $=t[i];$.active?$.update(e,a):delete t[i]}},render:e=>{for(let a in t){let i=t[a];i.active&&i.render(e)}},get:e=>{let a=r[e].pool,i;for(let $=0;$<a.length;$++){let A=a[$];if(!A.active){i=A,o+=1,t[o]=i;break}}return i},detach:()=>{for(let e in r)r[e].pool.forEach(A=>{A.kill()})}};n.init();function s(e,a){r[e]=a}return n}var be={w:16,h:16,frames:"$86A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$70|$70A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$86|$54A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$102|$70A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$86|$102A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$54",palette:{A:"#38b764",B:"#257179",C:"#5d275d",D:"#ef7d57",E:"#b13e53",F:"#f4f4f4",G:"#ffcd75"},fps:8},we={w:16,h:16,frames:"$105A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$55|$89A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$71|$73A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$87|$89A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$71|$105A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$55",palette:{A:"#f4f4f4",B:"#ef7d57",C:"#38b764",D:"#257179",E:"#ffcd75"},fps:8};function w1(o,r){let t={name:o,x:0,y:0,width:0,height:0,loop:!0,points:1,followTarget:{x:0,y:0,width:8,height:8},followTargetSpeed:2,addTo:(n,s)=>{s!==void 0?(n.addAt(t.body,s),n.addAt(t.skin,s)):(n.add(t.body),n.add(t.skin)),t.parent=n},addBody:()=>{t.body=G(0,0,r.w,r.h,"#fff"),t.body.name=`${o}.body`,t.body.visible=!1},setBody:(n,s,e)=>{t.body.width=n,t.body.height=s,t.body.color=e||t.body.color},addSkin:()=>{t.skin=Z(r,!1,t.loop),t.skin.name=`${o}.skin`,t.skin.onComplete=t.onComplete},update:()=>{t.skin.x=t.body.x-t.body.width/2,t.skin.y=t.body.y-t.body.height/2,t.body.update(),t.skin.update(),t.gotHit&&(q1(t,t.followTarget,t.followTargetSpeed),j(t.body,t.followTarget)&&t.kill())},render:n=>{},vsPlayer:(n,s)=>{if(t.gotHit)return;let e=t.body,a=n.body;j(e,a)&&(t.gotHit=!0,t.onHit(),n.syncPowers(),R.play("fxPick"))},onHit:()=>{t.stop(0)},kill:()=>{t.skin.stop(),t.body.detach(),t.skin.detach(),t.parent=null,t.reserved=!1,t.gotHit=!1},play:()=>{t.skin.visible=!0,t.skin.start()},stop:n=>{t.skin.stop(n)}};return Object.defineProperties(t,{x:{set:n=>{t.body.x=n},get:()=>t.body.x},y:{set:n=>{t.body.y=n},get:()=>t.body.y},width:{set:n=>{t.body.width=n},get:()=>t.body.width},height:{set:n=>{t.body.height=n},get:()=>t.body.height},scaleX:{set:n=>{t.body.scaleX=n},get:()=>t.body.scaleX},active:{get:()=>!!(t.body.parent&&t.skin.parent)}}),t}function Fe(o,r){let t=w1(o,r),n=t.onHit;return t.followTarget={x:0,y:0,width:4,height:4},t.addBody(),t.addSkin(),t.onHit=()=>{m.fireBall.total+=t.points,m.setPlayerPower("fireball",m.fireBall.total),n()},t}function Te(o,r){let t=w1(o,r),n=t.onHit;return t.followTarget={x:32,y:0,width:4,height:4},t.addBody(),t.addSkin(),t.onHit=()=>{m.laserBeam.total+=t.points,m.setPlayerPower("laserBeam",m.laserBeam.total),n()},t}var _t=1,kt=1;function _e(){let o=0,r={},t={},n={init:()=>{e("apple",{max:_t,pool:[]}),e("corn",{max:kt,pool:[]});for(let a in r){let i=a,$=r[i],A=$.max,l=$.pool;for(let f=0;f<A;f++){let c=`${i}_${f}`;switch(i){case"apple":l.push(Fe(c,be));break;case"corn":l.push(Te(c,we));break}}}},update:(a,i)=>{for(let $ in t){let A=t[$];A.active?(A.update(),A.vsPlayer(i,a)):delete t[$]}},render:a=>{for(let i in t){let $=t[i];$.active&&$.render(a)}},get:a=>{let i=r[a].pool,$;for(let A=0;A<i.length;A++){let l=i[A];if(!l.active&&!l.reserved){$=l,o+=1,t[o]=$,$.reserved=!0;break}}return $},detach:()=>{for(let a in r)r[a].pool.forEach(l=>{l.kill()});s()}};n.init();function s(){for(let a in t)delete t[a]}function e(a,i){r[a]=i}return n}var ke={w:8,h:8,frames:"$19A2$5A1B1C1A1$4A1B2A1$5A2$19|$19A2$5A1D2A1$4A1D2A1$5A2$19|$19D2$5D1A2D1$4D1A2D1$5D2$19",palette:{A:"#b13e53",B:"#5d275d",C:"#ffcd75",D:"#ef7d57"},fps:12},Le={w:96,h:8,frames:"$97A3B2$90A5B91A197B91$1A3B2$186|$97A3C2$90A5C91A197C91$1A3C2$186|$193D96A95D1A95$1D95$192|$193E96F95E1F95$1E95$192|$289D96A95$1D95$192|$289C95$1C95$288|$289C2$1C2$1C2$1C4$2C3$1C1$1C2$1C7$2C1$1C1$1C4$1C4$3C1$1C2$1C2$1C4$2C3$1C1$1C2$1C7$2C1$1C1$1C4$1C4$385|$289C2$14C1$1C2$1C7$2C1$1C1$1C2$24C3$12C1$2C1$1C1$1C4$393",palette:{A:"#f4f4f4",B:"#73eff7",C:"#b13e53",D:"#3b5dc9",E:"#ef7d57",F:"#ffcd75"},fps:10};function F1(o,r){let t={name:o,flipH:1,speedX:1,x:0,y:0,vx:0,width:0,height:0,scaleX:1,loop:!0,addTo:(n,s)=>{s!==void 0?(n.addAt(t.body,s),n.addAt(t.skin,s)):(n.add(t.body),n.add(t.skin)),t.parent=n},addBody:()=>{t.body=G(0,0,r.w,r.h),t.body.name=`${o}.body`,t.body.visible=!1},addSkin:()=>{t.skin=Z(r,!1,t.loop),t.skin.name=`${o}.skin`,t.skin.onComplete=t.onComplete},update:()=>{t.skin.x=t.body.x,t.skin.y=t.body.y,t.body.update(),t.skin.update()},render:n=>{},kill:()=>{t.skin.stop(),t.skin.detach(),t.body.detach(),t.parent=null,t.reserved=!1},play:()=>{t.skin.visible=!0,t.skin.start()},stop:()=>{t.skin.stop()},vsPlatforms:(n,s)=>{if(t.allowHit)for(let e=0;e<n.length&&t.active;e++){let a=n[e],i=t.body;j(i,a)&&(t.onHitPlatform(a),t.kill())}},vsEnemies:(n,s)=>{for(let e=0;e<n.length;e++){let a=n[e];if(!t.active)break;let i=t.body,$=a.body;j(i,$)&&a.active&&(a.receiveDamage(1,t),t.onHitEnemy(a))}},onHitPlatform:n=>{},onHitEnemy:n=>{}};return Object.defineProperties(t,{x:{set:n=>{t.body.x=n},get:()=>t.body.x},y:{set:n=>{t.body.y=n},get:()=>t.body.y},width:{set:n=>{t.body.width=n},get:()=>t.body.width},height:{set:n=>{t.body.height=n},get:()=>t.body.height},scaleX:{set:n=>{t.body.scaleX=n},get:()=>t.body.scaleX},active:{get:()=>!!(t.body.parent&&t.skin.parent)}}),t}function Pe(o,r){let t=F1(o,r),n=t.update,s=Object.assign(t,{update:()=>{s.active&&(n(),s.vx=s.flipH*s.speedX,s.x+=s.vx)},onHitPlatform:e=>{let a=H.sfxPool.get("fireballImpact");a&&(a.x=s.flipH===-1?s.x+s.width:s.x,a.y=s.y,a.scaleX=s.flipH,a.start(),s.parent.add(a))},onHitEnemy:e=>{s.kill()}});return s.allowHit=!0,s.addBody(),s.addSkin(),s}function Se(o,r){let t=F1(o,r),n=t.update,s=Object.assign(t,{update:()=>{s.active&&(n(),s.skin.scaleX=s.body.scaleX,s.body.scaleX<0?s.skin.x=s.x+s.skin.width:s.skin.x=s.x)},onComplete:e=>{s.kill()}});return s.loop=!1,s.addBody(),s.addSkin(),s}var Lt=1,S1=1;function Ie(){let o=0,r={},t={},n={init:()=>{e("fireball",{max:S1,pool:[]}),e("laserBeam",{max:Lt,pool:[]});for(let a in r){let i=a,$=r[i],A=$.max,l=$.pool;for(let f=0;f<A;f++){let c=`${i}_${f}`;switch(i){case"fireball":l.push(Pe(c,ke));break;case"laserBeam":l.push(Se(c,Le));break}}}},update:(a,i,$)=>{for(let A in t){let l=t[A];l.active?(l.update(),l.vsPlatforms(i,a),l.vsEnemies($,a)):delete t[A]}},render:a=>{for(let i in t){let $=t[i];$.active&&$.render(a)}},get:a=>{let i=r[a].pool,$;for(let A=0;A<i.length;A++){let l=i[A];if(!l.active&&!l.reserved){$=l,o+=1,t[o]=$,$.reserved=!0;break}}return $},detach:()=>{for(let a in r)r[a].pool.forEach(l=>{l.kill()});s()}};n.init();function s(){for(let a in t)delete t[a]}function e(a,i){r[a]=i}return n}var He={w:16,h:16,frames:"$70A4$11A6$9A8$8A8$8A8$8A8$9A6$11A4$70|$70B4$11B6$9B3C1B4$8B2C1B3C1B1$8B5C1B2$8B3C1B4$9B6$11B4$70|$18D1$8D1$7D2$5D1$9D2$3D2$9D3$1D2$3D3$5D10$6D4B2D3$4D4B2D1B1D3$7D3B4D2$8D3B3D2$9D2B1D4$9D6$9D7$8D5$11D2$13D1$12|$3D2$6D1$7D1$20A2$11D2A4$7D1$1E1D2E1A3D2$3D2$2D1E3A2D2E2D5$2E1D2E2D1E3A1D1$1D2$1A2D5E2A2$4A4E1D2E1A2$6A4E1D2A4$6A2E1D1E2D1A2$8A1D3E1D1A1$10A1E3$12A3$11D1$15D2$10|$8A1$4D2$7A3$5D1$5D2E1A1$2E1D2$6E1D1A3$1E1D3E2$4E2A3$1A2E4$3A1E2D1A1$2A2$2E2A1$3A1D2$2A2$4A2D2$6A1D3$4D1$2A1$3A3D2E1$5A3$2A4E2A1$5A1$4A1D2E1A3$10A1E2$1A1$6E2A1$13A1D2E2$12A1D2$24|$8A2$8E1D1$4A2$1E3$3E1D1$2A1$7E2$3D1$1A3$7E1$6A1$13A1$5E2$7A3$5D2$2A2$3A1$4A2E1D1$2A2$1A2$5A2E2$5A2$6E2$17A1$6E1$2A2$3A3$5E1D1$1A2$4A1$7E1D1E1$14E3$24|$6A3$9E1$4A1$5E2$3E2$10E2$1E1$3A1$14A2$19E1$16E1$20A1$2A2$4A2$4A2$2A2$4A1$19E2$2A1$6A1$4E1$4A1$6A1$2E1$7E1$16E2$16E1$9",palette:{A:"#333c57",B:"#f4f4f4",C:"#566c86",D:"#ffcd75",E:"#ef7d57"},fps:9},Ge={w:16,h:16,frames:"$19A1$4A1$11A1$3A2$10A6$2A2$3A2$1A2B4A4$3A4B6A2$5A2B3C2B3A1$6A1B2C4B2A1$6A1B2C4B2A2$4A2B3C2B3A3$2A4B6A2$6A3B4A2$9A8$9A2$3A2$9A1$25|$8A1$10A1$4A2$9A2$4A1$3A2$13A2$2A2$5C4$1A1$4A2$1C8$9C6$10C2$1C2$2A2$6C3$1C1$4A2$5C3$2C2$1A4$2A2$1C3$1C3$5A2$3C2$2C1$17A1$8A1$5A3$7A1$6A2$6A1$11|$3A1$4A1$10A2$4A1$10A1$9A4$5C3$7A1$4C2$2C1$11C3$14C3$14C1$21A2$4C1$8A3$1A1$2C2$5C2$3A2$3C3$3C1$10C2$22A1$5A1$8A2$4A1$12|$3A1$27A1$7C2$5A1$7C2$33C2$15C2$34A2$16A2$18C2$7C1$7C2$5C2$32A1$17|$38C1$14C1$36C2$15C1$87C2$8C1$6C2$6C1$35|$20C2$14C1$54C1$16C1$85C1$16C1$9C1$34",palette:{A:"#94b0c2",B:"#f4f4f4",C:"#b13e53"},fps:10},Oe={w:16,h:16,frames:"$177A1$11A2$3A2$6A1$2A2$2A4$4A3$6A2$2A2$1A3$10A2$2A1$2A1$2|$161A1$12A2$14A2$16A2$2A2$6A2$2A2$2A2$6A2$18|$146A1$24A2$2A3$9A2$1A4$1A2$14A1$9A1$34|$145A1$24A2$3A1$3A2$5A2$4A2$14A1$11A2$34|$177A1$1A1$6A2$2A2$3A1$12A2$10A2$34|$190A1$1A1$2A1$12A1$11A1$35|$206A1$1A1$47",palette:{A:"#f4f4f4"},fps:10},Re={w:16,h:16,frames:"$195A2$13A3$7A2$4A2$7A3$5A3$4A3$3|$194A3$6A2$5A3$6A2$6A2$7A2$4A2$8A2$2|$178A2$8A2$3A3$8A3$2A2$10A2$33|$177A2$11A5$11A4$46|$174A4$13A3$62|$174A1$2A1$15A1$62",palette:{A:"#f4f4f4"},fps:10},Me={w:8,h:8,frames:"$13A2$5A3B1$1A2$1A2B2$1A2$3C2$4A2C2$4A3B1$5A2$1|$12A2$3A2$1A2B2$1A2$3B2$10A2$3B1$2A2$2B2$8|$10A1$3B1$6B2$1A1$3B2$15B1$3A1$3B1$10|$13B2$5B2$42|$12B1$51",palette:{A:"#b13e53",B:"#5d275d",C:"#ef7d57"},fps:12};function u1(o,r){let t=Z(r,!1,!1),n=Object.assign(t,{name:o,onComplete:s=>{n.kill()},kill:()=>{n.stop(),n.detach(),n.reserved=!1}});return n.visible=!0,Object.defineProperties(n,{active:{get:()=>n.parent}}),n}var Pt=3,St=1,It=5,Ht=5;function Ne(){let o=0,r={},t={},n={init:()=>{e("impactDusts",{max:Pt,pool:[]}),e("blast",{max:St,pool:[]}),e("emergeDusts",{max:It,pool:[]}),e("bodyExplode",{max:Ht,pool:[]}),e("fireballImpact",{max:S1,pool:[]});for(let a in r){let i=a,$=r[i],A=$.max,l=$.pool;for(let f=0;f<A;f++){let c=`${i}_${f}`;switch(i){case"impactDusts":l.push(u1(c,Re));break;case"emergeDusts":l.push(u1(c,Oe));break;case"fireballImpact":l.push(u1(c,Me));break;case"blast":l.push(u1(c,He));break;case"bodyExplode":l.push(u1(c,Ge));break}}}},update:()=>{for(let a in t){let i=t[a];i.active?i.update():delete t[a]}},get:a=>{let i=r[a].pool,$;for(let A=0;A<i.length;A++){let l=i[A];if(!l.active&&!l.reserved){$=l,o+=1,t[o]=$,$.reserved=!0;break}}return $},detach:()=>{for(let a in r)r[a].pool.forEach(l=>{l.kill()});s()}};n.init();function s(){for(let a in t)delete t[a]}function e(a,i){r[a]=i}return n}function Xe(o,r){let t=512,n=!1;e1.is("fscreen").onDown=()=>{n=!n,s()};let s=()=>{let e=window.innerWidth,a=window.innerHeight,i=e/a,$=r.width/r.height,A=0,l=0;i<=$?(A=e,l=A/$):(l=a,A=l*$),o.forEach(f=>{n?(f.style.width=n1(A),f.style.height=n1(l)):(f.style.width=n1(t),f.style.height=n1(t))})};window.onresize=s,s()}var I1=[{name:"background",tileset:"tiles",data:[36,-1,-1,-1,36,-1,-1,-1,32,50,51,41,-1,-1,-1,54,-1,-1,-1,30,41,56,57,47,36,31,55,60,61,38,39,40,47,41,-1,-1,42,60,61,-1,-1,54,55,46,-1,47,-1,-1,-1,-1,-1,-1,-1,60,61,-1,10,10,10,-1,-1,-1,-1,-1,9,-1,-1,-1,16,16,16,11,0,15,1,4,15,15,5,3,1,1,1,5,6,7,7,7,7,7,7,7,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:96,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72}]},{name:"entities",entities:[{name:"player",id:1,x:8,y:48},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"apple_item",id:9,x:48,y:48,width:8,height:8}]},{name:"texts",entities:[{name:"text",id:0,x:0,y:80,width:8,height:8,values:{text:"Arrow Keys to Move",name:"move"}}]}];function je(o,r,t,n){let s=o,e=s.map(()=>!1),a=G(0,0,r,t,n),i=Object.assign(a,{nodes:s,width:r,height:t,register:$=>{e[$]=!0},isJobDone:()=>!e.includes(!1),kill:()=>{i.detach()}});return i}function Ve(o,r,t){let n=U(),s=l1(String(n.uid)),e=s.canvas,a=s.ctx,i=Object.assign(n,{texture:o,render:$=>{if(!i.visible||!i.texture)return;if(s.cached){$.drawImage(e,0,0);return}s.cached=!0,e.width=$.canvas.width,e.height=$.canvas.height;let A=o.w;r.forEach((l,f)=>{if(l>-1){let c=f%t*A,d=Math.floor(f/t)*A;x1(a,i.texture,l,c,d)}})},destroy:()=>{B1(String(n.uid))}});return o&&(i.width=o.w,i.height=o.h),i}function a1(o,r,t,n,s=1){let e=U(),a=e.render,i=n,$=s,A=l1(String(e.uid)),l=A.canvas,f=A.ctx,c=Object.assign(e,{text:i,texture:o,render:h=>{if(!c.visible||!c.texture)return;if(A.cached){Q(c,h),h.drawImage(l,0,0);return}A.cached=!0;let b=d(),x=o.w,F=t;l.width=h.canvas.width,l.height=h.canvas.height,b.forEach((y,B)=>{let S=y.id,w=B%F*x;B&&(w=b.map(O=>O.w).filter((O,k)=>k<B).reduce((O,k)=>O+k,0)+c.gap*B),x1(f,c.texture,S,w,0)}),Q(c,f)},destroy:()=>{B1(String(e.uid))}});function d(){let h=i.split(""),b=r.map(y=>y[0]),x=r.map(y=>y[1]);return h.map(y=>{let B=b.indexOf(y),S=x[B];return{id:B,w:S,l:y}})}o&&(c.width=o.w,c.height=o.h);function C(){A=l1(String(e.uid)),l=A.canvas,f=A.ctx}return Object.defineProperties(c,{text:{set:h=>{i!==h&&(i=h,c.destroy(),C())},get:()=>i},gap:{set:h=>{$=h,c.destroy(),C()},get:()=>$}}),c}var t1={w:8,h:8,frames:"$4A1$1A1$4A1$1A1$1A1$1A1$1A1$1A3$1A1B1$1B1A1B1$2A2B2A1B1A1$1A1B2A1B1A1B1A1B1A1B3A1B1A1B1A1B1A1B2A1|$4A1$4A1$2A1$1A1$2A1$1A1$1A2$1A1$1B1A1$1A1$2A1B1A1B1$1B1$1B1A1B2A1B1A1B1A1B1A1B1A1B1A1B4A1B1A1B1A1B1|$1A1$1A1$4A1$1A1$1A1$3A3$1A1$1A1$2B1A1B1$1B1A1$1A1B1A1B2A2$1B1A1B1A1B2A1$1B1A1B3A1B1A2B2A1B1A1B1A1|$20A1$1A1$6A2$5A1$1A2$4A1$1A2$5A1$1B1$4A1B1A1B1|$17A1$1A1$2A1$1A1$1A1$1A1$1A1$1A1$1A2$1A1$1A3$1A1$1A3$1A2B1A2$1B1A1B2A2B2A1|$17A1$1A1$4A1$1A1$6A1$1A1$5A1$1A1$4A1$1A1B1$4B1A1B1A1$4|$1C8B10C2B2C18D2C2D2C1D4C1D11|C8B8C1B2C2B1C16D1C3D2C2D1C2D15|C7$1B7C3B2C2B2C9D2C2D1C2D3C2D2C1D16|$27E1F1$6E1F1$4E5F1$4E1F1$6E1F1$3|$2F1A1$2F1$3E1$3E1$1A1E2A1F1E1A1F1$1A1F1$2A1E1$1A1$1F1A2$1F1A1$2E1$3E1$1F1E1A1F1A2E1F1$1A1F1$1A1$1F1$1|$64|D1G1D3G2D1G3D2G2D11G2D1G2D3G2D1G2D3G2D6G1D3G1D1$2D3$3|D1G1D3G2D1G3D2G3D1G2D10G1D3G2D1G3D1G3D2G1D3G1D5$3D4$2|D6G1D2G3D1G3D1G4D1G1D1G4D5G3D16$1D3$2D2$2D1$1|$3F2$5F1E3$3F1E1F4$1F1E1F1H4F2E1F1H1F2H1F2A1F2H3I1A3H1A2I2B1A1F1B1A1B2A1|$1A2$3F1$3E1A2$1A1$1F1A2E1A1F1A1F1$1A1F1A1$2E1A1$2F1$1A1$1A1$2A1E1$1A1$1F1$1A1$1E1A2$1E1A1$1A2$1A4|$64|$36G1$7G1$7G1$6G2$3|$45G1$7G1$3G1$3G1$1G1|D1G1D3G2D1G3D2G2D11G2D1G2D3G2D1G2D3G2D6G1D3G1D9|D1G1D3G2D1G3D2G3D1G2D10G1D3G2D1G3D1G3D2G1D3G1D14|D6G1D2G3D1G3D1G4D1G1D1G4D5G3D28|$64|$6F1$4F1$2F1$4F1$2F1$1F1$2F1$2F1$1F1$2F1$2F1$1F1$2F1$2F1$1F1$1F1$4F2$1F1$4F1|F1$3F1$2F2$3F1$2F2$3F1$1F3$2F1$2F2$1F1$1F1$2F2$1F1$1F1$1F3$1F1$1F1$1F3$1F1$1F1$1F3|F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$1F1$4F2$2F1$3F2$2F1$3F2$2F1$12|$64|$64|$64|$11F1$13F1$1E1$1F1$13F1$20|$12F1$7F1$5F2E1F2$5F1$7F1$19|$19F1$6F1E1F1$6F1$28|$10F1$1F1$4F1$3F1$5E1$5F1$3F1$4F1$1F1$19|$64|$64|$4F1$37F1$21|$11F1$13F1$13F1$21F1$2|$3F1$34F1$25|$25F1$21F1$16|$21F1$42|$37F1$26|$14F1$20F1$11F1$16|$52F1$11|$1F1$19F1$18F1$1F1$21|$44F1$19|$64|$23F2$39|$64|$38F1$2F1$22|$22F1E1$5E3$4E2F1E1$4E4$3F1E4$3E2F1E2|$8E3F1$4E5$3E2F2$4E1F2$5E2F1$5E2$6E2$6|$64|$64|$60F1$3|$29F1$34|$3E1F3E1$3E2F1E2$4E4$4E4$5E3$6F1E1$16|E2$6F1E1$6E3$5E2F1$5E1F3$4E2F1E2$3E4$12|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64|$64",palette:{A:"#29366f",B:"#38b764",C:"#257179",D:"#5d275d",E:"#f4f4f4",F:"#94b0c2",G:"#b13e53",H:"#566c86",I:"#333c57"},fps:1};var $1=[[" ",4],["!",1],['"',3],["#",5],["$",4],["%",5],["&",5],["'",1],["(",2],[")",2],["*",3],["+",3],[",",2],["-",3],[".",1],["/",5],["0",4],["1",2],["2",4],["3",4],["4",4],["5",4],["6",4],["7",4],["8",4],["9",4],[":",1],[";",1],["<",3],["=",3],[">",3],["?",4],["@",5],["A",4],["B",4],["C",3],["D",4],["E",3],["F",3],["G",4],["H",4],["I",3],["J",4],["K",4],["L",3],["M",5],["N",4],["O",4],["P",4],["Q",4],["R",4],["S",4],["T",3],["U",4],["V",4],["W",5],["X",4],["Y",4],["Z",3],["[",2],["\\",5],["]",2],["^",3],["_",4],["`",2],["a",4],["b",4],["c",3],["d",4],["e",4],["f",3],["g",4],["h",4],["i",1],["j",2],["k",4],["l",1],["m",5],["n",4],["o",4],["p",4],["q",4],["r",3],["s",4],["t",3],["u",4],["v",4],["w",5],["x",3],["y",4],["z",4],["{",3],["|",1],["}",3],["~",4]],s1={w:8,h:8,frames:"$64|A1$7A1$7A1$15A1$31|A1$1A1$5A1$1A1$53|$1A1$1A1$4A5$4A1$1A1$4A5$4A1$1A1$28|$2A1$6A3$4A2$8A2$4A3$7A1$21|A1$2A1$7A1$6A1$6A1$7A1$2A1$27|$1A2$5A1$8A2$1A1$3A1$2A1$5A2$1A1$27|A1$7A1$55|$1A1$6A1$7A1$7A1$8A1$30|A1$8A1$7A1$7A1$6A1$31|A1$1A1$6A1$6A1$1A1$45|$9A1$6A3$6A1$38|$33A1$6A1$23|$16A3$45|$32A1$31|$4A1$6A1$6A1$6A1$6A1$31|$1A2$5A1$2A1$4A1$2A1$4A1$2A1$5A2$29|A2$7A1$7A1$7A1$7A1$30|A3$8A1$5A2$5A1$7A4$28|A3$8A1$5A2$8A1$4A3$29|$2A1$6A2$5A1$1A1$5A4$6A1$29|A4$4A1$7A3$8A1$4A3$29|$1A2$5A1$7A3$5A1$2A1$5A2$29|A4$7A1$6A1$6A1$7A1$30|$1A2$5A1$2A1$5A2$5A1$2A1$5A2$29|$1A2$5A1$2A1$5A3$7A1$5A2$29|$8A1$15A1$39|$8A1$15A1$7A1$31|$2A1$6A1$6A1$8A1$8A1$29|$8A3$13A3$37|A1$8A1$8A1$6A1$6A1$31|A3$8A1$5A2$14A1$30|$1A3$4A1$3A1$3A1$1A3$3A1$1A1$1A1$4A3$28|$1A2$5A1$2A1$4A1$2A1$4A4$4A1$2A1$28|A3$5A1$2A1$4A3$5A1$2A1$4A3$29|$1A2$5A1$7A1$7A1$8A2$29|A3$5A1$2A1$4A1$2A1$4A1$2A1$4A3$29|A3$5A1$7A3$5A1$7A3$29|A3$5A1$7A3$5A1$7A1$31|$1A3$4A1$7A1$1A2$4A1$2A1$5A3$28|A1$2A1$4A1$2A1$4A4$4A1$2A1$4A1$2A1$28|A3$6A1$7A1$7A1$6A3$29|$2A2$7A1$7A1$4A1$2A1$5A2$29|A1$2A1$4A1$1A1$5A2$6A1$1A1$5A1$2A1$28|A1$7A1$7A1$7A1$7A3$29|A1$3A1$3A2$1A2$3A1$1A1$1A1$3A1$3A1$3A1$3A1$27|A1$2A1$4A2$1A1$4A1$1A2$4A1$2A1$4A1$2A1$28|$1A2$5A1$2A1$4A1$2A1$4A1$2A1$5A2$29|A3$5A1$2A1$4A1$2A1$4A3$5A1$31|$1A2$5A1$2A1$4A1$2A1$4A1$2A1$5A2$8A1$20|A3$5A1$2A1$4A1$2A1$4A3$5A1$2A1$28|$1A3$4A1$8A2$8A1$4A3$29|A3$6A1$7A1$7A1$7A1$30|A1$2A1$4A1$2A1$4A1$2A1$4A1$2A1$5A2$29|A1$2A1$4A1$2A1$4A1$1A1$5A1$1A1$6A1$30|A1$3A1$3A1$1A1$1A1$3A1$1A1$1A1$3A1$1A1$1A1$4A1$1A1$28|A1$2A1$4A1$2A1$5A2$5A1$2A1$4A1$2A1$28|A1$2A1$4A1$2A1$5A3$7A1$5A2$29|A3$7A1$6A1$6A1$7A3$29|A2$6A1$7A1$7A1$7A2$30|A1$8A1$8A1$8A1$8A1$27|A2$7A1$7A1$7A1$6A2$30|$1A1$6A1$1A1$53|$32A4$28|A1$8A1$54|$9A3$4A1$2A1$4A1$2A1$5A3$28|A1$7A3$5A1$2A1$4A1$2A1$4A3$29|$9A2$5A1$7A1$8A2$29|$3A1$5A3$4A1$2A1$4A1$2A1$5A3$28|$9A2$5A1$1A2$4A2$7A2$29|$2A1$6A1$6A3$6A1$7A1$30|$9A3$4A1$2A1$4A1$2A1$5A3$7A1$5A2$13|A1$7A3$5A1$2A1$4A1$2A1$4A1$2A1$28|A1$15A1$7A1$7A1$31|$1A1$15A1$7A1$7A1$7A1$6A1$15|A1$7A1$2A1$4A1$1A1$5A3$5A1$2A1$28|A1$7A1$7A1$7A1$7A1$31|$8A4$4A1$1A1$1A1$3A1$1A1$1A1$3A1$1A1$1A1$27|$8A3$5A1$2A1$4A1$2A1$4A1$2A1$28|$9A2$5A1$2A1$4A1$2A1$5A2$29|$8A3$5A1$2A1$4A1$2A1$4A3$5A1$7A1$15|$9A3$4A1$2A1$4A1$2A1$5A3$7A1$7A1$12|$8A1$1A1$5A2$6A1$7A1$31|$9A3$4A2$8A2$4A3$29|$1A1$6A3$6A1$7A1$8A1$29|$8A1$2A1$4A1$2A1$4A1$2A1$5A3$28|$8A1$2A1$4A1$2A1$4A1$1A1$6A1$30|$8A1$1A1$1A1$3A1$1A1$1A1$4A1$1A1$5A1$1A1$28|$8A1$1A1$6A1$7A1$6A1$1A1$29|$8A1$2A1$4A1$2A1$4A1$2A1$5A3$7A1$5A2$13|$8A4$6A1$6A1$6A4$28|$1A2$6A1$6A1$8A1$7A2$29|A1$7A1$7A1$7A1$7A1$31|A2$7A1$8A1$6A1$6A2$30|$1A1$1A1$4A1$1A1$53|$64|$64|$64",palette:{A:"#ffffff"}};function L(o){let r=H.actorPool,t=H.sfxPool,n=H.powerPool,s=H.dexpPool,e=H.itemsPool,a=f1(),i=a.destroy,$=Object.assign(a,{destroy:()=>{r.detach(),t.detach(),n.detach(),s.detach(),e.detach(),i()}}),A=$.stage,l=[],f=[],c=[],d=[],C=[],h=[],b=[],x=[],F=[],y;o.forEach((p,u)=>{if(u){let D=p.name;p.entities.forEach(k=>{var D1,_1;let T=k.name,V=(D1=k.width)!=null?D1:t1.w,E=(_1=k.height)!=null?_1:t1.h,g=k.x,v=k.y,_=k.values,Y=k.nodes,M=I=>{let N=G(0,0,V,E,I);return N.x=g,N.y=v,N.visible=!1,A.add(N),N};if(D==="entities"){if(T==="player"&&(y=r.getPlayer(),y.reset(),y.setBody(V,E,"#ff0000"),y.x=g,y.y=v,y.addTo(A)),T.includes("enemy")){let N=T.split("_")[1],X=_.flipH,h1=_.state,k1=_.triggered,q=r.getEnemy(N);q.reset(),q.setBody(V,E,"#ff0000"),q.flipH=X,q.x=g,q.y=v,q.addTo(A,0),f.push(q),k1?q.waitForTrigger(h1):(q.waitForTrigger(h1),q.onTrigger(null,X,!1))}if(T.includes("item")){let N=T.split("_")[0],X=e.get(N);X.x=g,X.y=v,X.play(),X.setBody(V,E),X.body.visible=!1,X.addTo(A,0),c.push(X)}if(T==="triggerEnemy"){let I=je(Y,V,E,"#257179");I.x=g,I.y=v,I.visible=!1,A.add(I),x.push(I)}T==="hurt"&&h.push(M()),T==="door"&&C.push(M()),T==="hideEnemy"&&b.push(M())}if(D==="collision"&&T==="platform"&&l.push(M("#4ed72d")),D==="reversers"&&T==="reverser"&&d.push(M("#ffcd75")),D==="texts"){let I=a1(s1,$1,14,_.text);_.name&&(I.name=_.name),I.x=g+V/2,I.y=v,A.add(I),F.push(I)}})}});function B(){oe(.3,()=>{if(!(f.length>=199)){var u=r.getEnemy("ryan");u.reset(),u.x=96/2,u.y=0,u.addTo(A,0),f.push(u),u.setVisible(!1,!0),u.changeState("run"),console.log("enemy:",f.length)}})}$.update=()=>{m.loaded&&(m.loaded=!0,S())};function S(){w()&&(y.update(),y.vsPlatforms(l,A),y.vsEnemyTriggers(x,f,A),y.vsHurts(h,A),y.vsDoors(C,A)),f.forEach(p=>{if(p.active)p.update(),p.vsPlatforms(l,A),p.vsReversers(d,A),p.vsHurts(h,A),p.vsHiders(b,A),w()&&p.vsPlayer(y,A);else if(!p.isToBeTriggered()){let u=d1(f,p);f.splice(u,1)}}),t.update(),n.update(A,l,f),s.update(l,h),e.update(A,y)}function w(){return y&&y.active}return $}function P(o){let r=f1(),t=r.stage,n=Ve(t1,o,12);return t.add(n),r}function Ye(){return m.resetPlayerProgress(),L(I1)}function Ue(){return P(I1[0].data)}var We=[{name:"background",tileset:"tiles",data:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"texts",entities:[{name:"text",id:0,x:24,y:32,width:8,height:8,values:{text:"- You Win!",name:"win"}},{name:"text",id:1,x:16,y:64,width:8,height:8,values:{text:"'R' to Restart",name:"restart"}},{name:"text",id:2,x:0,y:88,width:8,height:8,values:{text:"yellosubmarine.itch.io",name:"link"}}]}];function Je(){let o=[],r=We,t=f1(),n=t.destroy,s=t.stage,e=G(0,0,96,96);s.add(e),m.gameWin=!0,t.destroy=()=>{n()},r.forEach(($,A)=>{if(A){let l=$.name;$.entities.forEach(c=>{var B,S;let d=c.name,C=(B=c.width)!=null?B:t1.w,h=(S=c.height)!=null?S:t1.h,b=c.x,x=c.y,F=c.values,y=c.nodes;if(l==="texts"){let w=a1(s1,$1,14,F.text);F.name&&(w.name=F.name),w.x=b+C/2,w.y=x,s.add(w),o.push(w)}})}});function a($=!0){o.forEach(A=>{A.name==="restart"&&(A.visible=$)})}function i($=!0){o.forEach(A=>{A.name==="link"&&(A.visible=$)})}return a(!1),J(4,()=>{i(!1)}),J(2,()=>{a(!0)}),e1.is("restart").onDown=()=>{m.gameWin&&(R.music(),m.gameWin=!1,H.scene.set(1))},R.killMusic(),R.play("fxWin"),t}var Ke={w:16,h:16,frames:"$21A1B3A1$12B3$14A1$27C1D8C1$6D1$2E1F1$1E1$2D1$6D1$3E1F1$3D1$6D1$1G1B1G2B1G1$1D1$6D1$1H1D1A1B2H1$1D1$6D1$1H2D1H3$1D1$6D1$1G1H4G1$1D1$6C1D8C1$51|$5A1B3A1$12B3$14A1$44C1D6C1$8D1$1E1F1$1E1$1D1$8D1$2E1F1$2D1$8D1G1B1G2B1G1D1$8D1H1D1A1B2H1D1$8D1H2D1H3D1$8D1G1H4G1D1$8C1D6C1$52",palette:{A:"#ffcd75",B:"#ef7d57",C:"#41a6f6",D:"#f4f4f4",E:"#38b764",F:"#257179",G:"#5d275d",H:"#b13e53"},fps:5},qe={w:16,h:16,frames:"$102A1B1$1A1$13A1B1$12C1D1C2D1C1$10E1F1G1D2E1$10E2F1E3$10C1E4C1$11E2C1E1$54",palette:{A:"#38b764",B:"#257179",C:"#5d275d",D:"#ef7d57",E:"#b13e53",F:"#f4f4f4",G:"#ffcd75"},fps:1},ze={w:16,h:16,frames:"$21A1B3A1$12B3$14A1$27C1D8C1$6D1$5D1B1$1D1$6D1$1E2F1D1B1A1$1D1$6D1$2F1D1B1A1B1$1D1$6D1$1F1A1B1A1B1$2D1$6D1$1E1B1A1E2$2D1$6D1$1E1F1E1F1E1$2D1$6C1D8C1$51|$5A1B3A1$12B3$14A1$44C1D6C1$8D1$4D1B1D1$8D1E2F1D1B1A1D1$8D1$1F1D1B1A1B1D1$8D1F1A1B1A1B1$1D1$8D1E1B1A1E2$1D1$8D1E1F1E1F1E1$1D1$8C1D6C1$52",palette:{A:"#ffcd75",B:"#ef7d57",C:"#41a6f6",D:"#f4f4f4",E:"#38b764",F:"#257179"},fps:5},Qe={w:16,h:16,frames:"$105A1B1$10C2D1A1B1E1$11D1A1B1E1B1$10D1E1B1E1B1$11C1B1E1C2$11C1D1C1D1C1$11D1C1$1D1$55",palette:{A:"#f4f4f4",B:"#ef7d57",C:"#38b764",D:"#257179",E:"#ffcd75"},fps:1};function T1(o,r=0,t=0,n="#fff"){let s=G(0,0,r,t,n);s.name=`${o}.body`;let e={x:0,y:0,width:r,height:t,name:o,body:s,addTo:(i,$)=>{$!==void 0?(i.addAt(e.body,$),i.addAt(e.skin,$)):(i.add(e.body),i.add(e.skin)),e.parent=i},setBody:(i,$,A)=>{e.body.width=i,e.body.height=$,e.body.color=A||e.body.color},addSkin:i=>{e.skin=C1(i),e.skin.name=`${o}.skin`},update:()=>{e.body.update(),a()},render:i=>{e.body.render(i),e.skin.render(i)},reset:()=>{e.skin&&e.skin.stop(),e.parent=null},detach:()=>{e.skin.detach(),e.body.detach(),e.parent=null,e.reserved=!1},play:i=>{e.skin&&e.skin.play(i)}};function a(){let i=e.skin;i&&(i.x=e.body.x,i.y=e.body.y,i.update())}return Object.defineProperties(e,{x:{set:i=>{e.body.x=i},get:()=>e.body.x},y:{set:i=>{e.body.y=i},get:()=>e.body.y},width:{set:i=>{e.body.width=i},get:()=>e.body.width},height:{set:i=>{e.body.height=i},get:()=>e.body.height},active:{get:()=>e.skin.parent&&e.body.parent&&!e.skin.visible}}),e}function Ze(o,r,t,n){let s=T1(o,r,t,n);return s.addSkin({selected:{texture:Ke,loop:!0},idle:{texture:qe,loop:!1}}),s.skin.play("idle"),s.skin.onComplete=e=>{},s}function et(o,r,t,n){let s=T1(o,r,t,n);return s.addSkin({selected:{texture:ze,loop:!0},idle:{texture:Qe,loop:!1}}),s.skin.play("idle"),s.skin.onComplete=e=>{},s}var tt=[{name:"background",tileset:"tiles",data:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"hud",entities:[{name:"appleIcon",id:0,x:0,y:0,width:16,height:16},{name:"cornIcon",id:1,x:32,y:0,width:16,height:16}]}];function ot(o){return a1(s1,$1,14,o)}function rt(){let o=!0,r=3,t=G(0,0,96,96),n=ot("Loading..."),s=Object.assign(t,{addTo:(e,a)=>{a!==void 0?e.addAt(s,a):e.add(s),n.x=96/2-15,n.y=96/2,e.add(n),s.parent=e,J(r,s.kill)},kill:()=>{s.detach(),n.detach(),o=!1}});return Object.defineProperties(s,{active:{get:()=>o}}),s}var r1,A1,g1,E1;function W(){let o=tt,r=f1(),t=r.stage,n=r.destroy;r.destroy=()=>{r1&&(r1.detach(),A1.detach(),g1.detach(),E1.detach()),n()},o.forEach(($,A)=>{if(A){let l=$.name;$.entities.forEach(c=>{var S,w;let d=c.name,C=(S=c.width)!=null?S:t1.w,h=(w=c.height)!=null?w:t1.h,b=c.x,x=c.y,F=c.values,y=c.nodes,B=(p,u)=>(p?p.reset():p=u,p.x=b,p.y=x,p.addTo(t),p.body.visible=!1,p);l==="hud"&&(d==="appleIcon"&&(r1=B(r1,Ze(d,C,h))),d==="cornIcon"&&(A1=B(A1,et(d,C,h))))})}});function s($,A,l){return $=$||a1(s1,$1,14,"x0"),$.x=A,$.y=l,t.add($),$}g1=s(g1,14,8),E1=s(E1,15*3,8);let e=rt();m.loaded||e.addTo(t);function a(){return e&&e.active&&!m.loaded}r.update=()=>{if(!a)return;m.loaded=!0,e=null;let $=m.fireBall.total,A=m.laserBeam.total;r1.update(),A1.update(),g1.text=`x${$}`,E1.text=`x${A}`,m.currentPowerName==="fireball"&&(A1.play("idle"),$>0?r1.play("selected"):r1.play("idle")),m.currentPowerName==="laserBeam"&&(r1.play("idle"),A>0?A1.play("selected"):A1.play("idle"))};function i($=!0){r1.skin.visible=$,A1.skin.visible=$,g1.visible=$,E1.visible=$}return r}var H1=[{name:"background",tileset:"tiles",data:[-1,-1,36,37,-1,-1,48,49,32,50,51,41,-1,-1,-1,-1,-1,-1,54,55,41,56,57,-1,33,38,39,-1,41,39,40,31,39,40,41,32,-1,44,45,46,47,45,46,44,45,46,47,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,10,4,4,10,10,10,-1,3,1,15,16,5,6,7,7,7,7,7,7,7,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:96,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"apple_item",id:6,x:48,y:48,width:8,height:8},{name:"enemy_thor",id:7,x:72,y:48,values:{flipH:-1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:8,x:16,y:32,width:8,height:24,nodes:[{x:72,y:48}]},{name:"hideEnemy",id:9,x:8,y:48,width:8,height:8}]},{name:"texts",entities:[{name:"text",id:0,x:0,y:80,width:8,height:8,values:{text:"Press 'X' to Shoot",name:"shoot"}}]}];function nt(){return L(H1)}function it(){return P(H1[0].data)}var G1=[{name:"background",tileset:"tiles",data:[-1,42,-1,44,-1,-1,-1,40,41,32,-1,-1,-1,-1,-1,-1,-1,43,-1,46,47,50,51,40,46,47,-1,30,-1,-1,-1,43,44,56,57,49,36,31,41,-1,38,-1,-1,-1,40,41,-1,32,-1,46,47,-1,-1,-1,-1,-1,46,47,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,15,1,4,18,19,-1,-1,1,1,1,5,7,7,7,8,24,25,6,7,7,7,7,7,12,13,13,14,12,13,14,14,13,13,12,12,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:32,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72},{name:"platform",id:3,x:48,y:56,width:56,height:8}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"hurt",id:4,x:24,y:64,width:32,height:8},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"apple_item",id:6,x:40,y:40,width:8,height:8}]},{name:"texts",entities:[{name:"text",id:0,x:0,y:80,width:8,height:8,values:{text:"Press 'z' to Jump",name:"jump"}}]}];function at(){return L(G1)}function $t(){return P(G1[0].data)}var O1=[{name:"background",tileset:"tiles",data:[36,-1,36,-1,-1,48,49,36,32,-1,-1,47,-1,-1,48,-1,-1,54,-1,40,41,50,51,54,-1,-1,30,55,-1,32,36,46,47,56,57,54,42,48,49,42,43,-1,42,54,40,41,31,43,-1,54,55,-1,-1,-1,-1,-1,46,47,43,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,-1,-1,0,10,18,19,-1,10,4,4,10,5,6,7,7,8,24,25,24,6,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:32,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72},{name:"platform",id:3,x:56,y:56,width:48,height:8}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"corn_item",id:7,x:40,y:40,width:8,height:8},{name:"apple_item",id:8,x:72,y:48,width:8,height:8},{name:"hurt",id:9,x:24,y:64,width:40,height:8}]},{name:"texts",entities:[{name:"text",id:0,x:8,y:80,width:8,height:8,values:{text:"Press 'C' to Switch",name:"switch"}}]}];function st(){return L(O1)}function At(){return P(O1[0].data)}var R1=[{name:"background",tileset:"tiles",data:[38,39,37,-1,-1,-1,38,33,-1,40,-1,31,-1,-1,-1,-1,-1,-1,-1,45,37,50,51,40,32,-1,32,38,-1,45,-1,38,39,56,57,32,42,43,-1,44,45,-1,-1,44,45,-1,38,39,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,44,45,-1,-1,-1,-1,9,-1,-1,-1,-1,10,16,11,16,16,1,4,15,15,5,3,1,16,1,5,6,7,7,7,7,7,7,7,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:96,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72}]},{name:"entities",entities:[{name:"player",id:1,x:8,y:48},{name:"triggerEnemy",id:2,x:40,y:24,width:8,height:32,nodes:[{x:80,y:48},{x:16,y:48}]},{name:"enemy_mojo",id:3,x:80,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_ryan",id:4,x:16,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"door",id:5,x:88,y:24,width:8,height:32}]},{name:"reversers",entities:[{name:"reverser",id:0,x:0,y:48,height:8},{name:"reverser",id:1,x:88,y:48,height:8}]}];function lt(){return L(R1)}function dt(){return P(R1[0].data)}var M1=[{name:"background",tileset:"tiles",data:[-1,39,40,41,-1,39,40,41,-1,-1,-1,30,-1,-1,46,-1,-1,-1,46,47,32,50,51,-1,-1,-1,-1,48,-1,40,32,37,-1,56,57,-1,36,37,30,54,45,46,47,49,48,49,48,32,-1,-1,-1,-1,-1,-1,54,55,54,55,54,55,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,15,1,4,18,19,-1,-1,1,1,1,5,7,7,7,8,24,25,24,6,7,7,7,7,12,13,13,14,12,13,14,14,13,13,12,12,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:32,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:96,y:0,width:8,height:72},{name:"platform",id:3,x:56,y:56,width:40,height:8}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"triggerEnemy",id:2,x:40,y:24,width:8,height:32,nodes:[{x:80,y:48}]},{name:"enemy_mojo",id:3,x:80,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"hurt",id:4,x:24,y:64,width:40,height:8},{name:"door",id:5,x:88,y:24,width:8,height:32},{name:"corn_item",id:6,x:40,y:40,width:8,height:8}]},{name:"reversers",entities:[{name:"reverser",id:0,x:48,y:48,height:8},{name:"reverser",id:1,x:88,y:48,height:8}]}];function ft(){return L(M1)}function ct(){return P(M1[0].data)}var N1=[{name:"background",tileset:"tiles",data:[38,-1,40,38,-1,-1,30,-1,40,48,40,40,-1,-1,-1,-1,-1,-1,39,40,50,51,31,43,-1,-1,39,32,43,-1,45,46,56,57,43,-1,32,37,45,46,-1,32,46,39,40,-1,-1,-1,42,-1,-1,-1,-1,-1,-1,45,46,-1,0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,7,0,16,1,4,16,16,10,10,15,2,20,20,7,7,7,7,7,7,7,7,7,7,21,20,12,13,13,13,13,13,13,12,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:96,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:104,y:0,width:8,height:72},{name:"platform",id:4,x:80,y:40,width:24,height:24}]},{name:"entities",entities:[{name:"triggerEnemy",id:2,x:40,y:32,width:8,height:24,nodes:[{x:56,y:48}]},{name:"enemy_mojo",id:3,x:56,y:48,values:{flipH:-1,state:"rise",triggered:!0}},{name:"door",id:5,x:96,y:16,width:8,height:32},{name:"enemy_thor",id:6,x:64,y:48,values:{flipH:-1,state:"run",triggered:!1}},{name:"enemy_ryan",id:7,x:88,y:32,values:{flipH:-1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:9,x:24,y:32,width:8,height:24,nodes:[{x:88,y:32}]},{name:"player",id:10,x:0,y:48},{name:"hideEnemy",id:11,x:8,y:48,width:8,height:8},{name:"apple_item",id:12,x:80,y:24,width:8,height:8}]}];function pt(){return L(N1)}function mt(){return P(N1[0].data)}var X1=[{name:"background",tileset:"tiles",data:[-1,-1,37,-1,-1,32,37,-1,-1,32,36,37,-1,-1,-1,-1,-1,-1,43,50,51,-1,42,43,-1,43,-1,-1,-1,36,37,56,57,38,-1,-1,-1,-1,42,43,-1,42,43,-1,-1,-1,38,32,2,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,7,10,10,9,-1,-1,-1,-1,-1,-1,10,20,20,15,16,15,5,-1,-1,3,4,16,16,21,20,7,7,7,8,24,25,6,7,7,7,13,14,13,13,13,13,13,12,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:48,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:104,y:0,width:8,height:72},{name:"platform",id:4,x:64,y:56,width:40,height:8},{name:"platform",id:5,x:-8,y:40,width:24,height:32}]},{name:"entities",entities:[{name:"triggerEnemy",id:2,x:40,y:32,width:8,height:24,nodes:[{x:16,y:48},{x:8,y:32}]},{name:"enemy_mojo",id:3,x:16,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"door",id:5,x:96,y:24,width:8,height:32},{name:"enemy_thor",id:6,x:8,y:32,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_ryan",id:7,x:88,y:48,values:{flipH:-1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:9,x:56,y:32,width:8,height:24,nodes:[{x:88,y:48}]},{name:"player",id:10,x:0,y:32},{name:"hurt",id:11,x:40,y:64,width:32,height:8},{name:"corn_item",id:12,x:48,y:40,width:8,height:8},{name:"apple_item",id:13,x:24,y:40,width:8,height:8}]}];function ut(){return L(X1)}function ht(){return P(X1[0].data)}var j1=[{name:"background",tileset:"tiles",data:[38,-1,38,-1,-1,38,-1,-1,-1,38,-1,32,-1,-1,-1,-1,-1,-1,-1,31,50,51,36,37,-1,-1,-1,43,-1,38,-1,-1,56,57,42,32,37,32,37,-1,32,-1,-1,38,-1,38,-1,-1,-1,42,43,-1,36,37,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,4,-1,-1,-1,-1,-1,-1,-1,-1,6,7,7,7,16,4,-1,-1,-1,-1,-1,-1,-1,-1,26,-1,7,8,-1,-1,-1,6,8,-1,-1,-1,-1,-1,20,20,16,10,5,-1,19,-1,18,19,18,4,21,20,7,7,7,24,24,25,24,24,25,7,13,14,13,13,13,13,13,12,13,13,13,14]},{name:"collision",entities:[{name:"platform",id:0,x:-8,y:64,width:24,height:32},{name:"platform",id:1,x:-8,y:24,width:8,height:72},{name:"platform",id:2,x:8,y:80,width:32,height:16},{name:"platform",id:4,x:64,y:48,width:48,height:8},{name:"platform",id:5,x:40,y:64,width:16,height:8},{name:"platform",id:6,x:104,y:8,width:8,height:56}]},{name:"entities",entities:[{name:"door",id:5,x:96,y:24,width:8,height:32},{name:"player",id:10,x:0,y:56},{name:"hurt",id:11,x:32,y:88,width:64,height:8},{name:"triggerEnemy",id:12,x:40,y:48,width:8,height:16,nodes:[{x:8,y:56},{x:72,y:40}]},{name:"enemy_ryan",id:13,x:16,y:72,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_ryan",id:16,x:72,y:40,values:{flipH:-1,state:"rise",triggered:!0}},{name:"enemy_mojo",id:17,x:8,y:56,values:{flipH:1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:18,x:32,y:72,width:8,height:8,nodes:[{x:16,y:72}]},{name:"corn_item",id:19,x:40,y:24,width:8,height:8},{name:"apple_item",id:20,x:24,y:64,width:8,height:8}]},{name:"reversers",entities:[{name:"reverser",id:0,x:56,y:40,height:24},{name:"reverser",id:1,x:88,y:40,height:16}]}];function yt(){return L(j1)}function xt(){return P(j1[0].data)}var V1=[{name:"background",tileset:"tiles",data:[32,-1,-1,-1,38,39,32,39,-1,-1,40,31,-1,-1,-1,-1,-1,-1,-1,45,50,51,40,43,42,43,42,43,32,-1,-1,-1,56,57,46,40,-1,-1,-1,-1,-1,44,32,-1,42,43,31,32,7,7,7,8,-1,-1,-1,36,37,-1,46,43,22,20,21,22,-1,-1,-1,42,43,-1,-1,-1,21,20,12,26,7,8,-1,-1,-1,-1,-1,-1,20,20,-1,-1,21,22,-1,-1,-1,-1,-1,-1,21,20,-1,-1,14,21,7,8,-1,-1,-1,-1,21,22,-1,9,-1,-1,-1,-1,-1,-1,-1,-1,21,20,16,15,0,1,1,10,10,3,16,4,13,14,7,7,7,7,7,7,7,7,7,7]},{name:"collision",entities:[{name:"platform",id:0,x:-8,y:32,width:40,height:24},{name:"platform",id:1,x:-8,y:-32,width:8,height:72},{name:"platform",id:5,x:32,y:64,width:32,height:8},{name:"platform",id:6,x:104,y:-24,width:8,height:120},{name:"platform",id:7,x:0,y:48,width:16,height:48},{name:"platform",id:8,x:32,y:48,width:16,height:24},{name:"platform",id:10,x:0,y:88,width:112,height:8}]},{name:"entities",entities:[{name:"door",id:5,x:96,y:24,width:8,height:64},{name:"player",id:10,x:0,y:24},{name:"triggerEnemy",id:14,x:48,y:8,width:8,height:40,nodes:[{x:16,y:24}]},{name:"enemy_ryan",id:15,x:16,y:24,values:{flipH:1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:16,x:64,y:24,width:8,height:40,nodes:[{x:40,y:40},{x:32,y:40}]},{name:"enemy_thor",id:17,x:32,y:40,values:{flipH:1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:19,x:72,y:40,width:8,height:48,nodes:[{x:48,y:56},{x:80,y:80}]},{name:"enemy_mojo",id:20,x:48,y:56,values:{flipH:1,state:"rise",triggered:!0}},{name:"triggerEnemy",id:21,x:40,y:72,width:8,height:16,nodes:[{x:64,y:80}]},{name:"enemy_thor",id:22,x:64,y:80,values:{flipH:1,state:"rise",triggered:!0}},{name:"corn_item",id:25,x:32,y:80,width:8,height:8},{name:"apple_item",id:27,x:16,y:64,width:8,height:8},{name:"enemy_ryan",id:28,x:80,y:80,values:{flipH:1,state:"rise",triggered:!0}}]},{name:"reversers",entities:[{name:"reverser",id:0,x:88,y:80,height:8},{name:"reverser",id:1,x:16,y:80,height:8}]}];function gt(){return L(V1)}function Et(){return P(V1[0].data)}var Y1=[{name:"background",tileset:"tiles",data:[37,-1,-1,39,-1,38,39,32,49,37,32,33,-1,-1,-1,-1,-1,-1,45,54,32,43,44,45,-1,-1,55,-1,55,39,50,51,42,-1,48,49,-1,-1,45,43,-1,45,56,57,-1,42,31,55,-1,-1,-1,-1,-1,-1,-1,-1,42,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,10,10,1,15,5,3,10,1,15,15,6,7,7,7,7,7,7,7,7,7,7,8,12,13,13,13,13,13,13,13,13,13,13,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},{name:"collision",entities:[{name:"platform",id:0,x:0,y:56,width:112,height:8},{name:"platform",id:1,x:-8,y:0,width:8,height:72},{name:"platform",id:2,x:104,y:0,width:8,height:72}]},{name:"entities",entities:[{name:"player",id:1,x:0,y:48},{name:"triggerEnemy",id:2,x:40,y:24,width:8,height:32,nodes:[{x:80,y:48},{x:16,y:48}]},{name:"enemy_mojo",id:3,x:80,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_ryan",id:4,x:16,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"enemy_mojo",id:6,x:72,y:48,values:{flipH:-1,state:"run",triggered:!1}},{name:"enemy_ryan",id:7,x:48,y:48,values:{flipH:-1,state:"run",triggered:!1}},{name:"enemy_thor",id:8,x:32,y:48,values:{flipH:1,state:"rise",triggered:!1}},{name:"triggerEnemy",id:9,x:56,y:32,width:8,height:24,nodes:[{x:8,y:48}]},{name:"enemy_mojo",id:10,x:8,y:48,values:{flipH:1,state:"rise",triggered:!0}},{name:"door",id:12,x:96,y:32,width:8,height:24},{name:"apple_item",id:13,x:48,y:40,width:8,height:8}]},{name:"reversers",entities:[{name:"reverser",id:0,x:0,y:48,height:8},{name:"reverser",id:1,x:88,y:48,height:8}]}];function Dt(){return L(Y1)}function Bt(){return P(Y1[0].data)}var e1=W1({left:"ArrowLeft",right:"ArrowRight",jump:"z",attack:"x",select:"c",debug:"q",fscreen:"e",restart:"r"}),m={sceneIndex:1,fireBall:{name:"fireball",total:0,max:50},laserBeam:{name:"laserBeam",total:0,max:50},currentPowerName:"fireball",resetPlayerProgress:()=>{m.fireBall.total=0,m.laserBeam.total=0,m.currentPowerName="fireball"},setPlayerPower:(o,r)=>{o==="laserBeam"?(m.laserBeam.total=r,m.laserBeam.total>m.laserBeam.max&&(m.laserBeam.total=m.laserBeam.max),m.currentPowerName==="fireball"&&!m.fireBall.total&&m.laserBeam.total&&(m.currentPowerName="laserBeam")):(m.fireBall.total=r,m.fireBall.total>m.fireBall.max&&(m.fireBall.total=m.fireBall.max),m.currentPowerName==="laserBeam"&&!m.laserBeam.total&&m.fireBall.total&&(m.currentPowerName="fireball"))}},m1=Z1(),H=(()=>{let o=[[null,null,null],[Ye,Ue,W],[nt,it,W],[at,$t,W],[st,At,W],[lt,dt,W],[ft,ct,W],[pt,mt,W],[ut,ht,W],[yt,xt,W],[gt,Et,W],[Dt,Bt,W],[null,null,Je]],r=J1(),t=v1(),n=v1(),s=v1(),e=ge(),a=Ne(),i=Ie(),$=_e(),A=ve(),l={set:f=>{let c=o[f],d=c[0],C=c[1],h=c[2];n.clear(),t.clear(),s.clear(),d&&n.set(d),C&&t.set(C),h&&s.set(h),m.sceneIndex=f},render:(f,c,d)=>{n.render(f.ctx),t.render(c.ctx),s.render(d.ctx)},update:()=>{n.update(),s.update()},reload:()=>{switch(L1(),m.resetPlayerProgress(),m.sceneIndex){case 2:m.setPlayerPower("fireball",1);break;case 5:m.setPlayerPower("fireball",1);break;case 7:m.setPlayerPower("fireball",1);break;case 11:m.setPlayerPower("fireball",2);break}l.set(m.sceneIndex)},next:()=>{L1(),m.sceneIndex+=1,l.set(m.sceneIndex)}};return{scene:l,layers:r,actorPool:e,sfxPool:a,powerPool:i,dexpPool:A,itemsPool:$}})();function Ct(){let o=H.scene,r=H.layers,t=r.add("bg",96,96),n=r.add("fg",96,96),s=r.add("ui",96,96);document.body.appendChild(t.canvas),document.body.appendChild(n.canvas),document.body.appendChild(s.canvas),m1.add("update",()=>{ee(),o.update()}),m1.add("render",()=>{o.render(n,t,s)}),o.reload(),Xe([t.canvas,n.canvas,s.canvas],{width:96,height:96}),R.music()}window.onload=()=>{Ct()};})();
